<!DOCTYPE html>

<html lang="en" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>autonomous_data_collection_agent.cli &#8212; Autonomous Data Collector Agent 1.0.0.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=4f649999" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css?v=039e1c02" />
    <script src="../../_static/documentation_options.js?v=2ab8bd80"></script>
    <script src="../../_static/doctools.js?v=888ff710"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <h1>Source code for autonomous_data_collection_agent.cli</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;This module provides the Autonomous Data Collector Agent CLI.&quot;&quot;&quot;</span>

<span class="c1"># The below code is importing various modules and classes from the `autonomous_data_collection_agent`</span>
<span class="c1"># package and other Python standard libraries. It also imports the `Enum` class from the `enum`</span>
<span class="c1"># module.</span>
<span class="kn">import</span> <span class="nn">typer</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">from</span> <span class="nn">autonomous_data_collection_agent</span> <span class="kn">import</span> <span class="n">ERRORS</span><span class="p">,</span> <span class="n">__app_name__</span><span class="p">,</span> <span class="n">__version__</span><span class="p">,</span> <span class="n">autonomousagent</span><span class="p">,</span> <span class="n">config</span><span class="p">,</span> <span class="n">database</span><span class="p">,</span> <span class="n">random_data</span><span class="p">,</span> <span class="n">raw_api</span>
<span class="kn">from</span> <span class="nn">enum</span> <span class="kn">import</span> <span class="n">Enum</span>
<span class="kn">from</span> <span class="nn">autonomous_data_collection_agent.database</span> <span class="kn">import</span> <span class="n">DatabaseHandler</span>
<span class="kn">from</span> <span class="nn">autonomous_data_collection_agent.fileencryption</span> <span class="kn">import</span> <span class="n">FileEncryption</span>
<span class="kn">from</span> <span class="nn">autonomous_data_collection_agent.sheduler_simple</span> <span class="kn">import</span> <span class="n">SchedulerService</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">logging</span>  <span class="c1"># Import the logging module</span>

<span class="c1">#  configuring the logging module in Python. It sets the log file path using the</span>
<span class="c1"># `config.getLogFilePath()` function, sets the file mode to &#39;a&#39; (append mode), sets the log message</span>
<span class="c1"># format, sets the date format, and sets the log level to DEBUG.</span>
<span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">getLogFilePath</span><span class="p">(),</span> <span class="n">filemode</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;</span><span class="si">%(asctime)s</span><span class="s1"> - </span><span class="si">%(name)s</span><span class="s1"> - </span><span class="si">%(levelname)s</span><span class="s1"> - </span><span class="si">%(message)s</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">datefmt</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">%d</span><span class="s2">-%b-%y %H:%M:%S&quot;</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">)</span>

<span class="c1"># defining a Python application using the `typer` library. The `typer.Typer()`</span>
<span class="c1"># function creates an instance of the `Typer` class, which is used to define command-line interfaces</span>
<span class="c1"># (CLIs) in Python.</span>
<span class="n">app</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Typer</span><span class="p">()</span>

<div class="viewcode-block" id="init">
<a class="viewcode-back" href="../../autonomous_data_collection_agent.html#autonomous_data_collection_agent.cli.init">[docs]</a>
<span class="nd">@app</span><span class="o">.</span><span class="n">command</span><span class="p">()</span>
    
<span class="k">def</span> <span class="nf">init</span><span class="p">(</span>
    <span class="n">endpoint_db_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Option</span><span class="p">(</span>
        <span class="nb">str</span><span class="p">(</span><span class="n">database</span><span class="o">.</span><span class="n">ENDPOINT_DB_FILE_PATH</span><span class="p">),</span>
        <span class="s2">&quot;--endpoint-db-path&quot;</span><span class="p">,</span>
        <span class="s2">&quot;-endpoint-db&quot;</span><span class="p">,</span>
        <span class="n">prompt</span><span class="o">=</span><span class="s2">&quot;endpoint database location?&quot;</span><span class="p">,</span>
    <span class="p">),</span>
    <span class="n">app_db_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Option</span><span class="p">(</span>
        <span class="nb">str</span><span class="p">(</span><span class="n">database</span><span class="o">.</span><span class="n">APP_DB_FILE_PATH</span><span class="p">),</span>
        <span class="s2">&quot;--app-db-path&quot;</span><span class="p">,</span>
        <span class="s2">&quot;-app-db&quot;</span><span class="p">,</span>
        <span class="n">prompt</span><span class="o">=</span><span class="s2">&quot;application database location?&quot;</span><span class="p">,</span>
    <span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The `init` function initializes the databases by creating a config file and creating the endpoint</span>
<span class="sd">    and app databases.</span>
<span class="sd">    </span>
<span class="sd">    :param endpoint_db_path: The `endpoint_db_path` parameter is the path to the location where the</span>
<span class="sd">    endpoint database will be created or initialized. This is the database that will store information</span>
<span class="sd">    about endpoints in your application</span>
<span class="sd">    :type endpoint_db_path: str</span>
<span class="sd">    :param app_db_path: The `app_db_path` parameter is the location or path where the application</span>
<span class="sd">    database will be created or initialized. It is a string that represents the file path of the</span>
<span class="sd">    application database</span>
<span class="sd">    :type app_db_path: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    
    <span class="c1"># Insert a log message</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Initializing the databases&quot;</span><span class="p">)</span>

    <span class="n">db_list</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s1">&#39;endpoint&#39;</span><span class="p">,</span> <span class="n">endpoint_db_path</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;app&#39;</span><span class="p">,</span> <span class="n">app_db_path</span><span class="p">)</span>
    <span class="p">]</span>
    
    <span class="k">def</span> <span class="nf">_run_init</span><span class="p">():</span>
        <span class="n">app_init_error</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">init_app</span><span class="p">(</span><span class="n">db_list</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">app_init_error</span><span class="p">:</span>
            <span class="n">typer</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span>
                <span class="sa">f</span><span class="s1">&#39;Creating config file failed with &quot;</span><span class="si">{</span><span class="n">ERRORS</span><span class="p">[</span><span class="n">app_init_error</span><span class="p">]</span><span class="si">}</span><span class="s1">&quot;&#39;</span><span class="p">,</span>
                <span class="n">fg</span><span class="o">=</span><span class="n">typer</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">RED</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">raise</span> <span class="n">typer</span><span class="o">.</span><span class="n">Exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

        <span class="c1"># Insert a log message</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Config file created successfully&quot;</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">db_name</span><span class="p">,</span> <span class="n">db_path</span> <span class="ow">in</span> <span class="n">db_list</span><span class="p">:</span>
            <span class="n">db_init_error</span> <span class="o">=</span> <span class="n">database</span><span class="o">.</span><span class="n">init_database</span><span class="p">(</span><span class="n">db_path</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">db_init_error</span><span class="p">:</span>
                <span class="n">typer</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s1">&#39;Creating </span><span class="si">{</span><span class="n">db_name</span><span class="si">}</span><span class="s1"> database failed with &quot;</span><span class="si">{</span><span class="n">ERRORS</span><span class="p">[</span><span class="n">db_init_error</span><span class="p">]</span><span class="si">}</span><span class="s1">&quot;&#39;</span><span class="p">,</span>
                    <span class="n">fg</span><span class="o">=</span><span class="n">typer</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">RED</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="k">raise</span> <span class="n">typer</span><span class="o">.</span><span class="n">Exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">typer</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;The </span><span class="si">{</span><span class="n">db_name</span><span class="si">}</span><span class="s2"> database is </span><span class="si">{</span><span class="n">db_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">fg</span><span class="o">=</span><span class="n">typer</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">GREEN</span><span class="p">)</span>

                <span class="c1"># Insert a log message</span>
                <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">db_name</span><span class="si">}</span><span class="s2"> database created successfully&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">CONFIG_FILE_PATH</span><span class="p">):</span>
        <span class="n">typer</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span>
            <span class="sa">f</span><span class="s1">&#39;</span><span class="se">\n\n</span><span class="s1">Important Notice !</span><span class="se">\n\n</span><span class="s1">&#39;</span><span class="p">,</span>
            <span class="n">fg</span><span class="o">=</span><span class="n">typer</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">RED</span><span class="p">,</span>
            <span class="n">bold</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">red_style</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">style</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;Config file exists and proceeding further will reset the file and databases. You will lose existing data which is irreversible. Do you still want to proceed?&quot;</span><span class="p">,</span> <span class="n">fg</span><span class="o">=</span><span class="n">typer</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">RED</span><span class="p">,</span> <span class="n">bold</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
     
        <span class="n">reset</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span>
            <span class="n">red_style</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>  <span class="c1"># Set a default value for confirmation</span>
            <span class="n">show_default</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>  <span class="c1"># Do not show the default value in the prompt</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">reset</span><span class="p">:</span>
            <span class="n">_run_init</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">typer</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="s2">&quot;Operation canceled&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">_run_init</span><span class="p">()</span></div>


<div class="viewcode-block" id="enable_threading">
<a class="viewcode-back" href="../../autonomous_data_collection_agent.html#autonomous_data_collection_agent.cli.enable_threading">[docs]</a>
<span class="nd">@app</span><span class="o">.</span><span class="n">command</span><span class="p">(</span><span class="s2">&quot;enable-threading&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">enable_threading</span><span class="p">(</span>
    <span class="n">is_enabled</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Option</span><span class="p">(</span>
        <span class="kc">True</span><span class="p">,</span>
        <span class="s2">&quot;--enabled&quot;</span><span class="p">,</span>
        <span class="s2">&quot;-e&quot;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Enable threading for concurrent downloads.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The function `enable_threading` enables or disables threading for concurrent file downloads and logs</span>
<span class="sd">    the status.</span>
<span class="sd">    </span>
<span class="sd">    :param is_enabled: The `is_enabled` parameter is a string that represents whether threading should</span>
<span class="sd">    be enabled or disabled for concurrent file downloads. It is set as a command-line option with a</span>
<span class="sd">    default value of `True`</span>
<span class="sd">    :type is_enabled: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">status</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">CONFIG_FILE_PATH</span><span class="p">):</span>
        <span class="n">status</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">enable_threading</span><span class="p">(</span><span class="n">is_enabled</span><span class="p">)</span>
       
        <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">is_enabled</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;True&quot;</span><span class="p">:</span>
            <span class="n">state</span> <span class="o">=</span> <span class="s2">&quot;enabled&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">state</span> <span class="o">=</span> <span class="s2">&quot;disabled&quot;</span>

        <span class="k">if</span> <span class="n">status</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Threading failed with &quot;</span><span class="si">{</span><span class="n">ERRORS</span><span class="p">[</span><span class="n">status</span><span class="p">]</span><span class="si">}</span><span class="s1">&quot;&#39;</span><span class="p">)</span>
            <span class="n">typer</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span>
                <span class="sa">f</span><span class="s1">&#39;Threading failed with &quot;</span><span class="si">{</span><span class="n">ERRORS</span><span class="p">[</span><span class="n">status</span><span class="p">]</span><span class="si">}</span><span class="s1">&quot;&#39;</span><span class="p">,</span> <span class="n">fg</span><span class="o">=</span><span class="n">typer</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">RED</span>
            <span class="p">)</span>
            <span class="k">raise</span> <span class="n">typer</span><span class="o">.</span><span class="n">Exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">typer</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;&quot;&quot;Threading is set to </span><span class="si">{</span><span class="n">state</span><span class="si">}</span><span class="s2">.&quot;&quot;&quot;</span><span class="p">,</span>
                <span class="n">fg</span><span class="o">=</span><span class="n">typer</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">GREEN</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="c1"># Insert a log message</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Threading is set to </span><span class="si">{</span><span class="n">state</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="set_concurrent_threads">
<a class="viewcode-back" href="../../autonomous_data_collection_agent.html#autonomous_data_collection_agent.cli.set_concurrent_threads">[docs]</a>
<span class="nd">@app</span><span class="o">.</span><span class="n">command</span><span class="p">(</span><span class="s2">&quot;set-concurrent-threads&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">set_concurrent_threads</span><span class="p">(</span>
    <span class="n">thread_count</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Argument</span><span class="p">(</span><span class="o">...</span><span class="p">,</span><span class="n">help</span><span class="o">=</span><span class="s2">&quot;Number of threads the CPU can support&quot;</span><span class="p">),</span>
    <span class="n">force</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Option</span><span class="p">(</span>
        <span class="kc">False</span><span class="p">,</span>
        <span class="s2">&quot;--force&quot;</span><span class="p">,</span>
        <span class="s2">&quot;-f&quot;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Force deletion without confirmation.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The function `set_concurrent_threads` sets the number of concurrent threads based on the CPU count</span>
<span class="sd">    and prompts the user for confirmation before making the change.</span>
<span class="sd">    </span>
<span class="sd">    :param thread_count: The `thread_count` parameter is an integer that represents the number of</span>
<span class="sd">    threads the CPU can support. It is used to set the concurrent threads count</span>
<span class="sd">    :type thread_count: int</span>

<span class="sd">    :param force: The `force` parameter is a boolean option that allows you to force the deletion of the</span>
<span class="sd">    endpoint without any confirmation prompt. If `force` is set to `True`, the endpoint will be removed</span>
<span class="sd">    immediately without any further checks or prompts. If `force` is set to `False` (the default</span>
<span class="sd">    :type force: bool</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">_set_threads</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">CONFIG_FILE_PATH</span><span class="p">):</span>
            <span class="n">error</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">set_concurrent_threads</span><span class="p">(</span><span class="n">thread_count</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">error</span><span class="p">:</span>
                <span class="n">typer</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s1">&#39;Set Concurrent Threads Count failed with &quot;</span><span class="si">{</span><span class="n">ERRORS</span><span class="p">[</span><span class="n">error</span><span class="p">]</span><span class="si">}</span><span class="s1">&quot;&#39;</span><span class="p">,</span> <span class="n">fg</span><span class="o">=</span><span class="n">typer</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">RED</span>
                <span class="p">)</span>
                <span class="k">raise</span> <span class="n">typer</span><span class="o">.</span><span class="n">Exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">typer</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;&quot;&quot;Set Concurrent Threads Count to : </span><span class="si">{</span><span class="n">thread_count</span><span class="si">}</span><span class="s2">&quot;&quot;&quot;</span><span class="p">,</span>
                    <span class="n">fg</span><span class="o">=</span><span class="n">typer</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">GREEN</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="c1"># Insert a log message</span>
                <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;Set Concurrent Threads Count to : </span><span class="si">{</span><span class="n">thread_count</span><span class="si">}</span><span class="s2">&quot;&quot;&quot;</span><span class="p">)</span>

    <span class="n">custom_style</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">style</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Thread count must be thought out as per CPU count on machine as it might chock the machine if set to higher number. Do you still want to proceed?</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">fg</span><span class="o">=</span><span class="n">typer</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">CYAN</span><span class="p">,</span> <span class="n">bold</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">force</span><span class="p">:</span>
        <span class="n">_set_threads</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span> 
        <span class="n">set_threads</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span>
            <span class="n">custom_style</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>  <span class="c1"># Set a default value for confirmation</span>
            <span class="n">show_default</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>  <span class="c1"># Do not show the default value in the prompt</span>
        <span class="p">)</span>
    
        <span class="k">if</span> <span class="n">set_threads</span><span class="p">:</span>
            <span class="n">_set_threads</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">typer</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="s2">&quot;Operation canceled&quot;</span><span class="p">)</span> </div>


<div class="viewcode-block" id="enable_encryption">
<a class="viewcode-back" href="../../autonomous_data_collection_agent.html#autonomous_data_collection_agent.cli.enable_encryption">[docs]</a>
<span class="nd">@app</span><span class="o">.</span><span class="n">command</span><span class="p">(</span><span class="s2">&quot;enable-encryption&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">enable_encryption</span><span class="p">(</span>
    <span class="n">is_enabled</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Option</span><span class="p">(</span>
        <span class="kc">True</span><span class="p">,</span>
        <span class="s2">&quot;--enabled&quot;</span><span class="p">,</span>
        <span class="s2">&quot;-e&quot;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Enable File Encryption.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The function `enable_encryption` enables or disables file encryption based on the value of the</span>
<span class="sd">    `is_enabled` parameter.</span>
<span class="sd">    </span>
<span class="sd">    :param is_enabled: A boolean flag indicating whether file encryption should be enabled or not</span>
<span class="sd">    :type is_enabled: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">status</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">CONFIG_FILE_PATH</span><span class="p">):</span>
        <span class="n">status</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">enable_encryption</span><span class="p">(</span><span class="n">is_enabled</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">is_enabled</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;True&quot;</span><span class="p">:</span>
            <span class="n">state</span> <span class="o">=</span> <span class="s2">&quot;enabled&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">state</span> <span class="o">=</span> <span class="s2">&quot;disabled&quot;</span>

        <span class="k">if</span> <span class="n">status</span><span class="p">:</span>
            <span class="n">typer</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span>
                <span class="sa">f</span><span class="s1">&#39;Encryption failed with &quot;</span><span class="si">{</span><span class="n">ERRORS</span><span class="p">[</span><span class="n">status</span><span class="p">]</span><span class="si">}</span><span class="s1">&quot;&#39;</span><span class="p">,</span> <span class="n">fg</span><span class="o">=</span><span class="n">typer</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">RED</span>
            <span class="p">)</span>
            <span class="k">raise</span> <span class="n">typer</span><span class="o">.</span><span class="n">Exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">typer</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;&quot;&quot;Encryption is set to </span><span class="si">{</span><span class="n">state</span><span class="si">}</span><span class="s2">.&quot;&quot;&quot;</span><span class="p">,</span>
                <span class="n">fg</span><span class="o">=</span><span class="n">typer</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">GREEN</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="c1"># Insert a log message</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;File encryption is set to </span><span class="si">{</span><span class="n">state</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="reset_encryption_key">
<a class="viewcode-back" href="../../autonomous_data_collection_agent.html#autonomous_data_collection_agent.cli.reset_encryption_key">[docs]</a>
<span class="nd">@app</span><span class="o">.</span><span class="n">command</span><span class="p">(</span><span class="s2">&quot;reset-encryption-key&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">reset_encryption_key</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The function `reset_encryption_key()` prompts the user to confirm if they want to reset the</span>
<span class="sd">    encryption key, and if confirmed, it resets the key and logs a message.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">_reset</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">CONFIG_FILE_PATH</span><span class="p">):</span>
            <span class="n">error</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">reset_encryption_key</span><span class="p">()</span>

            <span class="k">if</span> <span class="n">error</span><span class="p">:</span>
                <span class="n">typer</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s1">&#39;Encryption key reset failed with &quot;</span><span class="si">{</span><span class="n">ERRORS</span><span class="p">[</span><span class="n">error</span><span class="p">]</span><span class="si">}</span><span class="s1">&quot;&#39;</span><span class="p">,</span> <span class="n">fg</span><span class="o">=</span><span class="n">typer</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">RED</span>
                <span class="p">)</span>
                <span class="k">raise</span> <span class="n">typer</span><span class="o">.</span><span class="n">Exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">typer</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;&quot;&quot;Encryption key is reset.&quot;&quot;&quot;</span><span class="p">,</span>
                    <span class="n">fg</span><span class="o">=</span><span class="n">typer</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">GREEN</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="c1"># Insert a log message</span>
                <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Encryption key has been reset.&quot;</span><span class="p">)</span>

    <span class="n">reset</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;Resetting encryption key will result in the loss of currently encrypted data. Do you still want to proceed?&quot;</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="n">reset</span><span class="p">:</span>
        <span class="n">_reset</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">typer</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="s2">&quot;Operation canceled&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="check_encryption">
<a class="viewcode-back" href="../../autonomous_data_collection_agent.html#autonomous_data_collection_agent.cli.check_encryption">[docs]</a>
<span class="nd">@app</span><span class="o">.</span><span class="n">command</span><span class="p">(</span><span class="s2">&quot;check-encryption&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">check_encryption</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The function `check_encryption()` checks if encryption is enabled and provides a message</span>
<span class="sd">    accordingly.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">file_encryption</span> <span class="o">=</span> <span class="n">FileEncryption</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">file_encryption</span><span class="o">.</span><span class="n">check_if_enabled</span><span class="p">():</span>
        <span class="n">typer</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span>
            <span class="s1">&#39;Encryption is enabled.&#39;</span><span class="p">,</span>
            <span class="n">fg</span><span class="o">=</span><span class="n">typer</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">BRIGHT_MAGENTA</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">typer</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span>
            <span class="s1">&#39;Encryption is not enabled. Please, run &quot;autonomous_data_collection_agent enable-encryption&quot; .&#39;</span><span class="p">,</span>
            <span class="n">fg</span><span class="o">=</span><span class="n">typer</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">RED</span><span class="p">,</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="get_endpoints">
<a class="viewcode-back" href="../../autonomous_data_collection_agent.html#autonomous_data_collection_agent.cli.get_endpoints">[docs]</a>
<span class="k">def</span> <span class="nf">get_endpoints</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">autonomousagent</span><span class="o">.</span><span class="n">Endpoints</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The function `get_endpoints()` returns an instance of the `Endpoints` class for performing</span>
<span class="sd">    operations on data.</span>
<span class="sd">    :return: an instance of the `autonomousagent.Endpoints` class, which is initialized with the</span>
<span class="sd">    `db_path` parameter.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">CONFIG_FILE_PATH</span><span class="p">):</span>
        <span class="n">db_path</span> <span class="o">=</span> <span class="n">database</span><span class="o">.</span><span class="n">get_database_path</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">CONFIG_FILE_PATH</span><span class="p">,</span> <span class="s1">&#39;endpoint&#39;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">typer</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span>
            <span class="s1">&#39;Config file not found. Please, run &quot;autonomous_data_collection_agent init&quot;&#39;</span><span class="p">,</span>
            <span class="n">fg</span><span class="o">=</span><span class="n">typer</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">RED</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">raise</span> <span class="n">typer</span><span class="o">.</span><span class="n">Exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">db_path</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">autonomousagent</span><span class="o">.</span><span class="n">Endpoints</span><span class="p">(</span><span class="n">db_path</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">typer</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span>
            <span class="s1">&#39;Database not found. Please, run &quot;autonomous_data_collection_agent init&quot;&#39;</span><span class="p">,</span>
            <span class="n">fg</span><span class="o">=</span><span class="n">typer</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">RED</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">raise</span> <span class="n">typer</span><span class="o">.</span><span class="n">Exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span></div>


<div class="viewcode-block" id="get_applications">
<a class="viewcode-back" href="../../autonomous_data_collection_agent.html#autonomous_data_collection_agent.cli.get_applications">[docs]</a>
<span class="k">def</span> <span class="nf">get_applications</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">autonomousagent</span><span class="o">.</span><span class="n">Applications</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The function `get_applications()` returns an instance of the `Applications` class from the</span>
<span class="sd">    `autonomousagent` module for operating on data.</span>
<span class="sd">    :return: an instance of the `autonomousagent.Applications` class.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">CONFIG_FILE_PATH</span><span class="p">):</span>
        <span class="n">db_path</span> <span class="o">=</span> <span class="n">database</span><span class="o">.</span><span class="n">get_database_path</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">CONFIG_FILE_PATH</span><span class="p">,</span> <span class="s1">&#39;app&#39;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">typer</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span>
            <span class="s1">&#39;Config file not found. Please, run &quot;autonomous_data_collection_agent init&quot;&#39;</span><span class="p">,</span>
            <span class="n">fg</span><span class="o">=</span><span class="n">typer</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">RED</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">raise</span> <span class="n">typer</span><span class="o">.</span><span class="n">Exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">db_path</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">autonomousagent</span><span class="o">.</span><span class="n">Applications</span><span class="p">(</span><span class="n">db_path</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">typer</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span>
            <span class="s1">&#39;Database not found. Please, run &quot;autonomous_data_collection_agent init&quot;&#39;</span><span class="p">,</span>
            <span class="n">fg</span><span class="o">=</span><span class="n">typer</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">RED</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">raise</span> <span class="n">typer</span><span class="o">.</span><span class="n">Exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span></div>


<span class="c1"># The HttpMethod class is used to restrict methods to GET, POST, and None using named tuple types.</span>
<div class="viewcode-block" id="HttpMethod">
<a class="viewcode-back" href="../../autonomous_data_collection_agent.html#autonomous_data_collection_agent.cli.HttpMethod">[docs]</a>
<span class="k">class</span> <span class="nc">HttpMethod</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; HttpMethod class for named touple types to restrict methods to GET, POST and None.&quot;&quot;&quot;</span>
    <span class="n">NONE</span> <span class="o">=</span> <span class="s2">&quot;None&quot;</span>
    <span class="n">GET</span> <span class="o">=</span> <span class="s2">&quot;GET&quot;</span>
    <span class="n">POST</span> <span class="o">=</span> <span class="s2">&quot;POST&quot;</span></div>


<div class="viewcode-block" id="validate_datetime">
<a class="viewcode-back" href="../../autonomous_data_collection_agent.html#autonomous_data_collection_agent.cli.validate_datetime">[docs]</a>
<span class="k">def</span> <span class="nf">validate_datetime</span><span class="p">(</span><span class="n">datetime_str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The function `validate_datetime` validates if a given datetime string is in the format &#39;DD-MM-YYYY</span>
<span class="sd">    hh:mm:ss&#39;.</span>
<span class="sd">    </span>
<span class="sd">    :param datetime_str: The `datetime_str` parameter is a string representing a date and time in the</span>
<span class="sd">    format &quot;DD-MM-YYYY hh:mm:ss&quot;</span>
<span class="sd">    :return: The function `validate_datetime` returns a `datetime` object if the input `datetime_str` is</span>
<span class="sd">    in the format &#39;DD-MM-YYYY hh:mm:ss&#39;. If the input is `None` or if it is not in the correct format, a</span>
<span class="sd">    `typer.BadParameter` exception is raised.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">datetime_str</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">datetime_str</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">%d</span><span class="s1">-%m-%Y %H:%M:%S&#39;</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">typer</span><span class="o">.</span><span class="n">BadParameter</span><span class="p">(</span><span class="s2">&quot;Invalid datetime format. Please use &#39;DD-MM-YYYY hh:mm:ss&#39;.&quot;</span><span class="p">)</span></div>

    
<div class="viewcode-block" id="add_endpoint">
<a class="viewcode-back" href="../../autonomous_data_collection_agent.html#autonomous_data_collection_agent.cli.add_endpoint">[docs]</a>
<span class="nd">@app</span><span class="o">.</span><span class="n">command</span><span class="p">(</span><span class="s2">&quot;add-endpoint&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">add_endpoint</span><span class="p">(</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Argument</span><span class="p">(</span><span class="o">...</span><span class="p">,</span><span class="n">help</span><span class="o">=</span><span class="s2">&quot;Name of Endpoint&quot;</span><span class="p">),</span>
    <span class="n">app_short_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Option</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="s2">&quot;--app-name&quot;</span><span class="p">,</span> <span class="s2">&quot;-a&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Application Short Name&quot;</span><span class="p">),</span>  
    <span class="n">url_endpoint</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Option</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="s2">&quot;--endpoint&quot;</span><span class="p">,</span> <span class="s2">&quot;-e&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Actual url endpoint without prefix or sufix / i.e. data-export-generic-api &quot;</span><span class="p">),</span>
    <span class="n">method</span><span class="p">:</span> <span class="n">HttpMethod</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Option</span><span class="p">(</span><span class="s2">&quot;GET&quot;</span><span class="p">,</span> <span class="s2">&quot;--method&quot;</span><span class="p">,</span> <span class="s2">&quot;-m&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Request method to use (GET or POST)&quot;</span><span class="p">),</span>
    <span class="n">payload</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Option</span><span class="p">({},</span> <span class="s2">&quot;--payload&quot;</span><span class="p">,</span> <span class="s2">&quot;-p&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;JSON payload for the request&quot;</span><span class="p">),</span>
    <span class="n">filters</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Option</span><span class="p">([],</span> <span class="s2">&quot;--filters&quot;</span><span class="p">,</span> <span class="s2">&quot;-f&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Filters as a list of fitler dictionaries&quot;</span><span class="p">),</span>  
    <span class="n">page_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Option</span><span class="p">(</span><span class="mi">1000</span><span class="p">,</span> <span class="s2">&quot;--page-size&quot;</span><span class="p">,</span> <span class="s2">&quot;-ps&quot;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">10000</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Page size (default: 1000)&quot;</span><span class="p">),</span>
    <span class="n">last_sync</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Option</span><span class="p">(</span>
        <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;--last-sync&quot;</span><span class="p">,</span>
        <span class="s2">&quot;-l&quot;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Last synchronization date and time in the format &#39;DD-MM-YYYY hh:mm:ss&#39;&quot;</span><span class="p">,</span>
        <span class="n">callback</span><span class="o">=</span><span class="n">validate_datetime</span><span class="p">,</span>
    <span class="p">),</span>
    <span class="n">process_status</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Option</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;--process-status&quot;</span><span class="p">,</span> <span class="s2">&quot;-prs&quot;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Process status (0=&gt;not processed, 1=&gt;inprocess, or 2=&gt;processed)&quot;</span><span class="p">),</span>
    <span class="n">status</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Option</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;--status&quot;</span><span class="p">,</span> <span class="s2">&quot;-s&quot;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Status (0=&gt;distabled, 1=&gt;enabled)&quot;</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The `add_endpoint` function is used to add a new endpoint with various details such as name,</span>
<span class="sd">    application short name, URL endpoint, request method, payload, filters, page size, last</span>
<span class="sd">    synchronization date, process status, and status.</span>
<span class="sd">    </span>
<span class="sd">    :param name: The name of the endpoint. It is a required argument</span>
<span class="sd">    :type name: str</span>
<span class="sd">    :param app_short_name: The `app_short_name` parameter is used to specify the short name of the</span>
<span class="sd">    application to which the endpoint belongs. It is provided as an option with the `--app-name` or `-a`</span>
<span class="sd">    flag when running the script</span>
<span class="sd">    :type app_short_name: str</span>
<span class="sd">    :param url_endpoint: The `url_endpoint` parameter is used to specify the actual URL endpoint without</span>
<span class="sd">    the prefix or suffix. For example, if the complete URL is</span>
<span class="sd">    `https://example.com/api/data-export-generic-api/`, then the `url_endpoint` value would be</span>
<span class="sd">    `data-export-generic-api`</span>
<span class="sd">    :type url_endpoint: str</span>
<span class="sd">    :param method: The `method` parameter is used to specify the request method to use for the endpoint.</span>
<span class="sd">    It is an instance of the `HttpMethod` enum, which can have a value of either &quot;GET&quot; or &quot;POST&quot;</span>
<span class="sd">    :type method: HttpMethod</span>
<span class="sd">    :param payload: The `payload` parameter is used to specify the JSON payload for the request. It is</span>
<span class="sd">    an optional parameter and its default value is an empty dictionary (`{}`). You can provide a JSON</span>
<span class="sd">    payload as a string in the format `{&quot;key1&quot;: &quot;value1&quot;, &quot;key2&quot;: &quot;value2</span>
<span class="sd">    :type payload: str</span>
<span class="sd">    :param filters: The `filters` parameter is used to specify filters for the endpoint. It is expected</span>
<span class="sd">    to be a list of filter dictionaries. Each filter dictionary should have the following keys:</span>
<span class="sd">    :type filters: str</span>
<span class="sd">    :param page_size: The `page_size` parameter determines the number of records to be returned per page</span>
<span class="sd">    in the API response. It is an optional parameter with a default value of 1000. The minimum value</span>
<span class="sd">    allowed is 1 and the maximum value allowed is 10000</span>
<span class="sd">    :type page_size: int</span>
<span class="sd">    :param last_sync: The `last_sync` parameter is used to specify the last synchronization date and</span>
<span class="sd">    time for the endpoint. It accepts a string value in the format &#39;DD-MM-YYYY hh:mm:ss&#39;. This parameter</span>
<span class="sd">    is optional and can be used to track the last time the endpoint was synchronized</span>
<span class="sd">    :type last_sync: str</span>
<span class="sd">    :param process_status: The `process_status` parameter is used to specify the process status of the</span>
<span class="sd">    endpoint. It can have one of the following values:</span>
<span class="sd">    :type process_status: int</span>
<span class="sd">    :param status: The `status` parameter is used to specify the status of the endpoint. It can have</span>
<span class="sd">    three possible values:</span>
<span class="sd">    :type status: int</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># python your_script.py add_endpoint --name &quot;Example Endpoint&quot; --app-name &quot;AOS&quot; --endpoint &quot;example-api-endpoint&quot; --method POST --payload &#39;{&quot;key1&quot;: &quot;value1&quot;, &quot;key2&quot;: &quot;value2&quot;}&#39; --filters &#39;[{&quot;column_name&quot;: &quot;name&quot;, &quot;operator&quot;: &quot;value&quot;, &quot;column_value&quot;: &quot;value&quot;}, {&quot;column_name&quot;: &quot;name&quot;, &quot;operator&quot;: &quot;value&quot;, &quot;column_value&quot;: &quot;value&quot;}]&#39; --page-size 500 --last-sync &quot;13-10-2023 14:30:00&quot; --process-status 0 --status 1</span>

    <span class="n">endpoints</span> <span class="o">=</span> <span class="n">get_endpoints</span><span class="p">()</span>
    <span class="n">endpoint_result</span> <span class="o">=</span> <span class="n">endpoints</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">app_short_name</span><span class="p">,</span> <span class="n">url_endpoint</span><span class="p">,</span> <span class="n">method</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">payload</span><span class="p">,</span> <span class="n">filters</span><span class="p">,</span> <span class="n">page_size</span><span class="p">,</span> <span class="n">last_sync</span><span class="p">,</span> <span class="n">process_status</span><span class="p">,</span> <span class="n">status</span><span class="p">)</span>
    <span class="n">endpoint</span> <span class="o">=</span> <span class="n">endpoint_result</span><span class="o">.</span><span class="n">endpoint</span>
    <span class="n">error</span> <span class="o">=</span> <span class="n">endpoint_result</span><span class="o">.</span><span class="n">error</span>

    <span class="k">if</span> <span class="n">error</span><span class="p">:</span>
        <span class="n">typer</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span>
            <span class="sa">f</span><span class="s1">&#39;Adding endpoint failed with &quot;</span><span class="si">{</span><span class="n">ERRORS</span><span class="p">[</span><span class="n">error</span><span class="p">]</span><span class="si">}</span><span class="s1">&quot;&#39;</span><span class="p">,</span> <span class="n">fg</span><span class="o">=</span><span class="n">typer</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">RED</span>
        <span class="p">)</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to add endpoint: </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> for app: </span><span class="si">{</span><span class="n">app_short_name</span><span class="si">}</span><span class="s2"> - Error: </span><span class="si">{</span><span class="n">ERRORS</span><span class="p">[</span><span class="n">error</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">raise</span> <span class="n">typer</span><span class="o">.</span><span class="n">Exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">typer</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;&quot;&quot;endpoint: &quot;</span><span class="si">{</span><span class="n">endpoint</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot; was added &quot;&quot;&quot;</span>
            <span class="sa">f</span><span class="s2">&quot;&quot;&quot;for app: </span><span class="si">{</span><span class="n">app_short_name</span><span class="si">}</span><span class="s2"> &quot;&quot;&quot;</span>
            <span class="sa">f</span><span class="s2">&quot;&quot;&quot;with url endpoint: </span><span class="si">{</span><span class="n">url_endpoint</span><span class="si">}</span><span class="s2">&quot;&quot;&quot;</span><span class="p">,</span>
            <span class="n">fg</span><span class="o">=</span><span class="n">typer</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">GREEN</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Added endpoint: </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> for app: </span><span class="si">{</span><span class="n">app_short_name</span><span class="si">}</span><span class="s2"> with URL endpoint: </span><span class="si">{</span><span class="n">url_endpoint</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="cli_render_endpints">
<a class="viewcode-back" href="../../autonomous_data_collection_agent.html#autonomous_data_collection_agent.cli.cli_render_endpints">[docs]</a>
<span class="k">def</span> <span class="nf">cli_render_endpints</span><span class="p">(</span><span class="n">endpoints</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The `cli_render_endpoints` function lists given endpoints on the screen with specific formatting.</span>
<span class="sd">    </span>
<span class="sd">    :param endpoints: The `endpoints` parameter is a dictionary that contains information about</span>
<span class="sd">    different endpoints. Each key in the dictionary represents an endpoint ID, and the corresponding</span>
<span class="sd">    value is a dictionary containing the endpoint details such as name, app ID, URL endpoint, method,</span>
<span class="sd">    payload, filters, page size, last sync, process</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">endpoints</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">typer</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span>
            <span class="s2">&quot;There are no endpoints in the list yet&quot;</span><span class="p">,</span> <span class="n">fg</span><span class="o">=</span><span class="n">typer</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">RED</span>
        <span class="p">)</span>
        <span class="k">raise</span> <span class="n">typer</span><span class="o">.</span><span class="n">Exit</span><span class="p">()</span>
    <span class="n">typer</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Endpoint List:</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">fg</span><span class="o">=</span><span class="n">typer</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">BLUE</span><span class="p">,</span> <span class="n">bold</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">columns</span> <span class="o">=</span> <span class="p">(</span>
        <span class="s2">&quot;ID.                       &quot;</span><span class="p">,</span>
        <span class="s2">&quot;| Name                                       &quot;</span><span class="p">,</span>
        <span class="s2">&quot;| App Short Name       &quot;</span><span class="p">,</span>
        <span class="s2">&quot;| URL Endpoint                                 &quot;</span><span class="p">,</span>
        <span class="s2">&quot;| Method     &quot;</span><span class="p">,</span>
        <span class="s2">&quot;| Payload                                                                        &quot;</span><span class="p">,</span>
        <span class="s2">&quot;| Filters                                                                                                                                    &quot;</span><span class="p">,</span>
        <span class="s2">&quot;| Page Size  &quot;</span><span class="p">,</span>
        <span class="s2">&quot;| Last Sync                         &quot;</span><span class="p">,</span>
        <span class="s2">&quot;| Process Status  &quot;</span><span class="p">,</span>
        <span class="s2">&quot;| Status  &quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">columns</span><span class="p">)</span>
    <span class="n">typer</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span><span class="n">headers</span><span class="p">,</span> <span class="n">fg</span><span class="o">=</span><span class="n">typer</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">BLUE</span><span class="p">,</span> <span class="n">bold</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">typer</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span><span class="s2">&quot;-&quot;</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">headers</span><span class="p">),</span> <span class="n">fg</span><span class="o">=</span><span class="n">typer</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">BLUE</span><span class="p">)</span>
    <span class="n">app_handler</span> <span class="o">=</span> <span class="n">DatabaseHandler</span><span class="p">(</span><span class="n">database</span><span class="o">.</span><span class="n">get_database_path</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">CONFIG_FILE_PATH</span><span class="p">,</span> <span class="s1">&#39;app&#39;</span><span class="p">))</span>
    
    <span class="k">def</span> <span class="nf">_column_len</span><span class="p">(</span><span class="n">column_val</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">column_val</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">0</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">column_val</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">column_val</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">column_val</span><span class="p">)</span>
        
    <span class="k">for</span> <span class="n">endpoint_id</span> <span class="ow">in</span> <span class="n">endpoints</span><span class="p">:</span>
        <span class="n">endpoint</span> <span class="o">=</span> <span class="n">endpoints</span><span class="p">[</span><span class="n">endpoint_id</span><span class="p">]</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">endpoint</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>
        <span class="n">app_id</span> <span class="o">=</span> <span class="n">endpoint</span><span class="p">[</span><span class="s1">&#39;app_id&#39;</span><span class="p">]</span>
        <span class="n">url_endpoint</span> <span class="o">=</span> <span class="n">endpoint</span><span class="p">[</span><span class="s1">&#39;url_endpoint&#39;</span><span class="p">]</span>
        <span class="n">method</span> <span class="o">=</span> <span class="n">endpoint</span><span class="p">[</span><span class="s1">&#39;method&#39;</span><span class="p">]</span>
        <span class="n">payload</span> <span class="o">=</span> <span class="n">endpoint</span><span class="p">[</span><span class="s1">&#39;payload&#39;</span><span class="p">]</span>
        <span class="n">filters</span> <span class="o">=</span> <span class="n">endpoint</span><span class="p">[</span><span class="s1">&#39;filters&#39;</span><span class="p">]</span>
        <span class="n">page_size</span> <span class="o">=</span> <span class="n">endpoint</span><span class="p">[</span><span class="s1">&#39;page_size&#39;</span><span class="p">]</span>
        <span class="n">last_sync</span> <span class="o">=</span> <span class="n">endpoint</span><span class="p">[</span><span class="s1">&#39;last_sync&#39;</span><span class="p">]</span>
        <span class="n">process_status</span> <span class="o">=</span> <span class="n">endpoint</span><span class="p">[</span><span class="s1">&#39;process_status&#39;</span><span class="p">]</span>
        <span class="n">status</span> <span class="o">=</span> <span class="n">endpoint</span><span class="p">[</span><span class="s1">&#39;status&#39;</span><span class="p">]</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">app_data</span> <span class="o">=</span> <span class="n">app_handler</span><span class="o">.</span><span class="n">get_by_id</span><span class="p">(</span><span class="n">app_id</span><span class="p">)</span>
            <span class="n">app_short_name</span> <span class="o">=</span> <span class="n">app_data</span><span class="o">.</span><span class="n">item_list</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;short_name&quot;</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
            <span class="n">app_short_name</span> <span class="o">=</span> <span class="n">app_id</span>
        
        <span class="n">typer</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">endpoint_id</span><span class="si">}{</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">columns</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">_column_len</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">endpoint_id</span><span class="p">)))</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="s1">&#39; &#39;</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="sa">f</span><span class="s2">&quot;| </span><span class="si">{</span><span class="n">name</span><span class="si">}{</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">columns</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">_column_len</span><span class="p">(</span><span class="n">name</span><span class="p">)</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="s1">&#39; &#39;</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="sa">f</span><span class="s2">&quot;| </span><span class="si">{</span><span class="n">app_short_name</span><span class="si">}{</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">columns</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">_column_len</span><span class="p">(</span><span class="n">app_short_name</span><span class="p">)</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="s1">&#39; &#39;</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="sa">f</span><span class="s2">&quot;| </span><span class="si">{</span><span class="n">url_endpoint</span><span class="si">}{</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">columns</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">_column_len</span><span class="p">(</span><span class="n">url_endpoint</span><span class="p">)</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="s1">&#39; &#39;</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="sa">f</span><span class="s2">&quot;| </span><span class="si">{</span><span class="n">method</span><span class="si">}{</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">columns</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">_column_len</span><span class="p">(</span><span class="n">method</span><span class="p">)</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="s1">&#39; &#39;</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="sa">f</span><span class="s2">&quot;| </span><span class="si">{</span><span class="n">payload</span><span class="si">}{</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">columns</span><span class="p">[</span><span class="mi">5</span><span class="p">])</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">_column_len</span><span class="p">(</span><span class="n">payload</span><span class="p">)</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="s1">&#39; &#39;</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="sa">f</span><span class="s2">&quot;| </span><span class="si">{</span><span class="n">filters</span><span class="si">}{</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">columns</span><span class="p">[</span><span class="mi">6</span><span class="p">])</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">_column_len</span><span class="p">(</span><span class="n">filters</span><span class="p">)</span><span class="o">-</span><span class="mi">4</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="s1">&#39; &#39;</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="sa">f</span><span class="s2">&quot;| </span><span class="si">{</span><span class="n">page_size</span><span class="si">}{</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">columns</span><span class="p">[</span><span class="mi">7</span><span class="p">])</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">_column_len</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">page_size</span><span class="p">))</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="s1">&#39; &#39;</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="sa">f</span><span class="s2">&quot;| </span><span class="si">{</span><span class="n">last_sync</span><span class="si">}{</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">columns</span><span class="p">[</span><span class="mi">8</span><span class="p">])</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">_column_len</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">last_sync</span><span class="p">))</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="s1">&#39; &#39;</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="sa">f</span><span class="s2">&quot;| </span><span class="si">{</span><span class="n">process_status</span><span class="si">}{</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">columns</span><span class="p">[</span><span class="mi">9</span><span class="p">])</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">_column_len</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">process_status</span><span class="p">))</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">4</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="s1">&#39; &#39;</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="sa">f</span><span class="s2">&quot;| </span><span class="si">{</span><span class="n">status</span><span class="si">}{</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">columns</span><span class="p">[</span><span class="mi">10</span><span class="p">])</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">_column_len</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">status</span><span class="p">))</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">4</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="s1">&#39; &#39;</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="n">fg</span><span class="o">=</span><span class="n">typer</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">BLUE</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="n">typer</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span><span class="s2">&quot;-&quot;</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">headers</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">fg</span><span class="o">=</span><span class="n">typer</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">BLUE</span><span class="p">)</span></div>


<div class="viewcode-block" id="list_endpoints">
<a class="viewcode-back" href="../../autonomous_data_collection_agent.html#autonomous_data_collection_agent.cli.list_endpoints">[docs]</a>
<span class="nd">@app</span><span class="o">.</span><span class="n">command</span><span class="p">(</span><span class="s2">&quot;list-endpoints&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">list_endpoints</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The function `list_endpoints()` lists all endpoints.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">endpoints</span> <span class="o">=</span> <span class="n">get_endpoints</span><span class="p">()</span>
    <span class="n">all_endpoints</span> <span class="o">=</span> <span class="n">endpoints</span><span class="o">.</span><span class="n">get_endpoint_list</span><span class="p">()</span>
    <span class="n">cli_render_endpints</span><span class="p">(</span><span class="n">all_endpoints</span><span class="p">)</span></div>


<div class="viewcode-block" id="list_app_endpoints">
<a class="viewcode-back" href="../../autonomous_data_collection_agent.html#autonomous_data_collection_agent.cli.list_app_endpoints">[docs]</a>
<span class="nd">@app</span><span class="o">.</span><span class="n">command</span><span class="p">(</span><span class="s2">&quot;list-app-endpoints&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">list_app_endpoints</span><span class="p">(</span><span class="n">app_short_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Argument</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Provide application short name&#39;</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The `list_app_endpoints` function lists all endpoints for a given application.</span>
<span class="sd">    </span>
<span class="sd">    :param app_short_name: The `app_short_name` parameter is a string that represents the short name of</span>
<span class="sd">    the application. It is used to filter the endpoints and retrieve only the endpoints that belong to</span>
<span class="sd">    the specified application</span>
<span class="sd">    :type app_short_name: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">endpoints</span> <span class="o">=</span> <span class="n">get_endpoints</span><span class="p">()</span>
    <span class="n">all_endpoints</span> <span class="o">=</span> <span class="n">endpoints</span><span class="o">.</span><span class="n">get_app_endpoints</span><span class="p">(</span><span class="n">app_short_name</span><span class="p">)</span>
    
    <span class="n">cli_render_endpints</span><span class="p">(</span><span class="n">all_endpoints</span><span class="p">)</span></div>


<div class="viewcode-block" id="get_endpoint">
<a class="viewcode-back" href="../../autonomous_data_collection_agent.html#autonomous_data_collection_agent.cli.get_endpoint">[docs]</a>
<span class="nd">@app</span><span class="o">.</span><span class="n">command</span><span class="p">(</span><span class="s2">&quot;get-endpoint&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">get_endpoint</span><span class="p">(</span><span class="n">endpoint_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Argument</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Get a endpoint using its ENDPOINT_ID&#39;</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The function `get_endpoint` retrieves an endpoint using its ID and displays the result.</span>
<span class="sd">    </span>
<span class="sd">    :param endpoint_id: The `endpoint_id` parameter is a required argument that represents the ID of the</span>
<span class="sd">    endpoint you want to retrieve. It is used to identify the specific endpoint you want to get from a</span>
<span class="sd">    collection of endpoints</span>
<span class="sd">    :type endpoint_id: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">endpoints</span> <span class="o">=</span> <span class="n">get_endpoints</span><span class="p">()</span>
    <span class="n">endpoint_result</span> <span class="o">=</span> <span class="n">endpoints</span><span class="o">.</span><span class="n">get_endpoint_by_id</span><span class="p">(</span><span class="n">endpoint_id</span><span class="p">)</span>
    <span class="n">endpoint</span> <span class="o">=</span> <span class="n">endpoint_result</span><span class="o">.</span><span class="n">endpoint</span>
    <span class="n">error</span> <span class="o">=</span> <span class="n">endpoint_result</span><span class="o">.</span><span class="n">error</span>
    <span class="k">if</span> <span class="n">error</span><span class="p">:</span>
        <span class="n">typer</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span>
            <span class="sa">f</span><span class="s1">&#39;Getting endpoint # &quot;</span><span class="si">{</span><span class="n">endpoint_id</span><span class="si">}</span><span class="s1">&quot; failed with &quot;</span><span class="si">{</span><span class="n">ERRORS</span><span class="p">[</span><span class="n">error</span><span class="p">]</span><span class="si">}</span><span class="s1">&quot;&#39;</span><span class="p">,</span>
            <span class="n">fg</span><span class="o">=</span><span class="n">typer</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">RED</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">raise</span> <span class="n">typer</span><span class="o">.</span><span class="n">Exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
       <span class="n">cli_render_endpints</span><span class="p">({</span><span class="n">endpoint_id</span><span class="p">:</span> <span class="n">endpoint</span><span class="p">})</span></div>


<div class="viewcode-block" id="get_endpoint_by_name">
<a class="viewcode-back" href="../../autonomous_data_collection_agent.html#autonomous_data_collection_agent.cli.get_endpoint_by_name">[docs]</a>
<span class="nd">@app</span><span class="o">.</span><span class="n">command</span><span class="p">(</span><span class="s2">&quot;get-endpoint-by-name&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">get_endpoint_by_name</span><span class="p">(</span><span class="n">endpoint_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Argument</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Get a endpoint using its endpoint name&#39;</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The function `get_endpoint_by_name` retrieves an endpoint using its name and displays the result.</span>
<span class="sd">    </span>
<span class="sd">    :param endpoint_name: The `endpoint_name` parameter is a string that represents the name of the</span>
<span class="sd">    endpoint you want to retrieve</span>
<span class="sd">    :type endpoint_name: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">endpoints</span> <span class="o">=</span> <span class="n">get_endpoints</span><span class="p">()</span>
    <span class="n">endpoint_result</span> <span class="o">=</span> <span class="n">endpoints</span><span class="o">.</span><span class="n">get_endpoint_by_name</span><span class="p">(</span><span class="n">endpoint_name</span><span class="p">)</span>
    <span class="n">endpoint</span> <span class="o">=</span> <span class="n">endpoint_result</span><span class="o">.</span><span class="n">endpoint</span>
    <span class="n">error</span> <span class="o">=</span> <span class="n">endpoint_result</span><span class="o">.</span><span class="n">error</span>
    <span class="k">if</span> <span class="n">error</span><span class="p">:</span>
        <span class="n">typer</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span>
            <span class="sa">f</span><span class="s1">&#39;Getting endpoint name &quot;</span><span class="si">{</span><span class="n">endpoint_name</span><span class="si">}</span><span class="s1">&quot; failed with &quot;</span><span class="si">{</span><span class="n">ERRORS</span><span class="p">[</span><span class="n">error</span><span class="p">]</span><span class="si">}</span><span class="s1">&quot;&#39;</span><span class="p">,</span>
            <span class="n">fg</span><span class="o">=</span><span class="n">typer</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">RED</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">raise</span> <span class="n">typer</span><span class="o">.</span><span class="n">Exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
       <span class="n">cli_render_endpints</span><span class="p">(</span><span class="n">endpoint</span><span class="p">)</span></div>


<span class="nd">@app</span><span class="o">.</span><span class="n">command</span><span class="p">(</span><span class="s2">&quot;get-endpoint-by-process-status&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">get_app_endpoints_by_status</span><span class="p">(</span>
    <span class="n">process_status</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Argument</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Get a endpoint using its process status&#39;</span><span class="p">),</span>
    <span class="n">app_short_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Option</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="s2">&quot;-short-name&quot;</span><span class="p">,</span> <span class="s2">&quot;-s&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Provide application short name&#39;</span><span class="p">)</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The function `get_app_endpoints_by_status` retrieves a list of endpoints based on their process</span>
<span class="sd">    status and application short name.</span>
<span class="sd">    </span>
<span class="sd">    :param process_status: An integer representing the process status of an endpoint. It should be</span>
<span class="sd">    between 0 and 2</span>
<span class="sd">    :type process_status: int</span>
<span class="sd">    :param app_short_name: A string representing the short name of the application</span>
<span class="sd">    :type app_short_name: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">endpoints</span> <span class="o">=</span> <span class="n">get_endpoints</span><span class="p">()</span>
    <span class="n">endpoint_list</span> <span class="o">=</span> <span class="n">endpoints</span><span class="o">.</span><span class="n">get_app_endpoints_by_process_status</span><span class="p">(</span><span class="n">app_short_name</span><span class="p">,</span> <span class="n">process_status</span><span class="p">)</span>
    <span class="n">cli_render_endpints</span><span class="p">(</span><span class="n">endpoint_list</span><span class="p">)</span>

<div class="viewcode-block" id="get_app_endpoints_by_status">
<a class="viewcode-back" href="../../autonomous_data_collection_agent.html#autonomous_data_collection_agent.cli.get_app_endpoints_by_status">[docs]</a>
<span class="nd">@app</span><span class="o">.</span><span class="n">command</span><span class="p">(</span><span class="s2">&quot;get-endpoint-by-status&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">get_app_endpoints_by_status</span><span class="p">(</span>
    <span class="n">status</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Argument</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Get a endpoint using its status&#39;</span><span class="p">),</span>
    <span class="n">app_short_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Option</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="s2">&quot;--short-name&quot;</span><span class="p">,</span> <span class="s2">&quot;-s&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Provide application short name&#39;</span><span class="p">)</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The function `get_app_endpoints_by_status` retrieves a list of endpoints based on their status and</span>
<span class="sd">    application short name.</span>
<span class="sd">    </span>
<span class="sd">    :param status: The `status` parameter is an integer that represents the status of an endpoint. It</span>
<span class="sd">    should be between 0 and 2, inclusive. This parameter is used to filter the endpoints based on their</span>
<span class="sd">    status</span>
<span class="sd">    :type status: int</span>
<span class="sd">    :param app_short_name: A string parameter that represents the short name of the application. It is</span>
<span class="sd">    required and can be provided using the `--short-name` or `-s` option when running the command</span>
<span class="sd">    :type app_short_name: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">endpoints</span> <span class="o">=</span> <span class="n">get_endpoints</span><span class="p">()</span>
    <span class="n">endpoint_list</span> <span class="o">=</span> <span class="n">endpoints</span><span class="o">.</span><span class="n">get_app_endpoints_by_status</span><span class="p">(</span><span class="n">app_short_name</span><span class="p">,</span> <span class="n">status</span><span class="p">)</span>
    <span class="n">cli_render_endpints</span><span class="p">(</span><span class="n">endpoint_list</span><span class="p">)</span></div>


<div class="viewcode-block" id="get_endpoint_by_url">
<a class="viewcode-back" href="../../autonomous_data_collection_agent.html#autonomous_data_collection_agent.cli.get_endpoint_by_url">[docs]</a>
<span class="nd">@app</span><span class="o">.</span><span class="n">command</span><span class="p">(</span><span class="s2">&quot;get-endpoint-by-url&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">get_endpoint_by_url</span><span class="p">(</span><span class="n">url_endpoint</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Argument</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Get a endpoint using its endpoint url&#39;</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The function `get_endpoint_by_url` retrieves an endpoint using its URL and displays the result.</span>
<span class="sd">    </span>
<span class="sd">    :param url_endpoint: The `url_endpoint` parameter is a string that represents the URL of an</span>
<span class="sd">    endpoint. It is used to search for a specific endpoint in a collection of endpoints</span>
<span class="sd">    :type url_endpoint: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">endpoints</span> <span class="o">=</span> <span class="n">get_endpoints</span><span class="p">()</span>
    <span class="n">endpoint_result</span> <span class="o">=</span> <span class="n">endpoints</span><span class="o">.</span><span class="n">get_endpoint_by_url</span><span class="p">(</span><span class="n">url_endpoint</span><span class="p">)</span>
    <span class="n">endpoint</span> <span class="o">=</span> <span class="n">endpoint_result</span><span class="o">.</span><span class="n">endpoint</span>
    <span class="n">error</span> <span class="o">=</span> <span class="n">endpoint_result</span><span class="o">.</span><span class="n">error</span>
    <span class="k">if</span> <span class="n">error</span><span class="p">:</span>
        <span class="n">typer</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span>
            <span class="sa">f</span><span class="s1">&#39;Getting endpoint url &quot;</span><span class="si">{</span><span class="n">url_endpoint</span><span class="si">}</span><span class="s1">&quot; failed with &quot;</span><span class="si">{</span><span class="n">ERRORS</span><span class="p">[</span><span class="n">error</span><span class="p">]</span><span class="si">}</span><span class="s1">&quot;&#39;</span><span class="p">,</span>
            <span class="n">fg</span><span class="o">=</span><span class="n">typer</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">RED</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">raise</span> <span class="n">typer</span><span class="o">.</span><span class="n">Exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
       <span class="n">cli_render_endpints</span><span class="p">(</span><span class="n">endpoint</span><span class="p">)</span></div>


<div class="viewcode-block" id="update_endpoint">
<a class="viewcode-back" href="../../autonomous_data_collection_agent.html#autonomous_data_collection_agent.cli.update_endpoint">[docs]</a>
<span class="nd">@app</span><span class="o">.</span><span class="n">command</span><span class="p">(</span><span class="s2">&quot;update-endpoint&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">update_endpoint</span><span class="p">(</span>
    <span class="n">endpoint_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Argument</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;ID of the endpoint to update&quot;</span><span class="p">),</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Option</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;--name&quot;</span><span class="p">,</span> <span class="s2">&quot;-n&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;New name of the endpoint&quot;</span><span class="p">),</span>
    <span class="n">app_short_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Option</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;--app-name&quot;</span><span class="p">,</span> <span class="s2">&quot;-a&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;New application short name&quot;</span><span class="p">),</span>
    <span class="n">url_endpoint</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Option</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;--endpoint&quot;</span><span class="p">,</span> <span class="s2">&quot;-e&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;New URL endpoint&quot;</span><span class="p">),</span>
    <span class="n">method</span><span class="p">:</span> <span class="n">HttpMethod</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Option</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;--method&quot;</span><span class="p">,</span> <span class="s2">&quot;-m&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;New request method (GET or POST)&quot;</span><span class="p">),</span>
    <span class="n">payload</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Option</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;--payload&quot;</span><span class="p">,</span> <span class="s2">&quot;-p&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;New JSON payload for the request&quot;</span><span class="p">),</span>
    <span class="n">filters</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Option</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;--filters&quot;</span><span class="p">,</span> <span class="s2">&quot;-f&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;New list of filters as JSON string&quot;</span><span class="p">),</span>
    <span class="n">page_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Option</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;--page-size&quot;</span><span class="p">,</span> <span class="s2">&quot;-ps&quot;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">10000</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;New page size (default: 1000)&quot;</span><span class="p">),</span>
    <span class="n">last_sync</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Option</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;--last-sync&quot;</span><span class="p">,</span> <span class="s2">&quot;-l&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;New last synchronization date and time in the format &#39;DD-MM-YYYY hh:mm:ss&#39;&quot;</span><span class="p">),</span>
    <span class="n">process_status</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Option</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;--process-status&quot;</span><span class="p">,</span> <span class="s2">&quot;-prs&quot;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;New process status (0=&gt;not processed, 1=&gt;inprocess, or 2=&gt;processed)&quot;</span><span class="p">),</span>
    <span class="n">status</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Option</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;--status&quot;</span><span class="p">,</span> <span class="s2">&quot;-s&quot;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Endpoint status (0=&gt;disabled, 1=&gt;enabled)&quot;</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The `update_endpoint` function updates an existing endpoint with new details based on the provided</span>
<span class="sd">    arguments.</span>
<span class="sd">    </span>
<span class="sd">    :param endpoint_id: The ID of the endpoint to update. This is a required argument</span>
<span class="sd">    :type endpoint_id: str</span>
<span class="sd">    :param name: The `name` parameter is used to specify the new name for the endpoint</span>
<span class="sd">    :type name: str</span>
<span class="sd">    :param app_short_name: The `app_short_name` parameter is used to specify the new application short</span>
<span class="sd">    name for the endpoint. It is an optional parameter that can be provided using the `--app-name` or</span>
<span class="sd">    `-a` option when calling the `update_endpoint` function. The application short name is used to</span>
<span class="sd">    identify the application</span>
<span class="sd">    :type app_short_name: str</span>
<span class="sd">    :param url_endpoint: The `url_endpoint` parameter is used to specify the new URL endpoint for the</span>
<span class="sd">    endpoint. It is an optional parameter and can be provided using the `--endpoint` or `-e` option when</span>
<span class="sd">    running the script. The value should be a string representing the new URL endpoint</span>
<span class="sd">    :type url_endpoint: str</span>
<span class="sd">    :param method: The `method` parameter is used to specify the new request method for the endpoint. It</span>
<span class="sd">    is an optional parameter and can be provided using the `--method` or `-m` option when calling the</span>
<span class="sd">    `update_endpoint` function. The allowed values for the `method` parameter are &quot;GET&quot; or</span>
<span class="sd">    :type method: HttpMethod</span>
<span class="sd">    :param payload: The `payload` parameter is used to specify a new JSON payload for the request. It</span>
<span class="sd">    allows you to provide data that will be sent along with the request to the endpoint</span>
<span class="sd">    :type payload: str</span>
<span class="sd">    :param filters: The `filters` parameter is used to specify a new list of filters for the endpoint.</span>
<span class="sd">    It should be provided as a JSON string. Filters are used to narrow down the data that is retrieved</span>
<span class="sd">    from the endpoint</span>
<span class="sd">    :type filters: str</span>
<span class="sd">    :param page_size: The `page_size` parameter is an optional parameter that specifies the number of</span>
<span class="sd">    items to retrieve per page when making a request to the endpoint. It accepts an integer value</span>
<span class="sd">    between 1 and 10000. The default value is 1000</span>
<span class="sd">    :type page_size: int</span>
<span class="sd">    :param last_sync: The `last_sync` parameter is used to specify the new last synchronization date and</span>
<span class="sd">    time for the endpoint. It should be provided in the format &quot;DD-MM-YYYY hh:mm:ss&quot;</span>
<span class="sd">    :type last_sync: str</span>
<span class="sd">    :param process_status: The `process_status` parameter is used to specify the new process status for</span>
<span class="sd">    the endpoint. It accepts an integer value between 0 and 2</span>
<span class="sd">    :type process_status: int</span>
<span class="sd">    :param status: The `status` parameter is used to specify the status of the endpoint. It can have</span>
<span class="sd">    three possible values:</span>
<span class="sd">    :type status: int</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Example usage: python your_script.py update_endpoint --id &quot;231541323453553701&quot; --name &quot;Updated Name&quot; --app-name &quot;Updated App&quot; --method POST --status 0</span>

    <span class="n">endpoints</span> <span class="o">=</span> <span class="n">get_endpoints</span><span class="p">()</span>
    <span class="n">endpoint_result</span> <span class="o">=</span> <span class="n">endpoints</span><span class="o">.</span><span class="n">get_endpoint_by_id</span><span class="p">(</span><span class="n">endpoint_id</span><span class="p">)</span>
    <span class="n">endpoint</span> <span class="o">=</span> <span class="n">endpoint_result</span><span class="o">.</span><span class="n">endpoint</span>
    <span class="n">error</span> <span class="o">=</span> <span class="n">endpoint_result</span><span class="o">.</span><span class="n">error</span>
    <span class="k">if</span> <span class="n">endpoint</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">typer</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span><span class="s2">&quot;Endpoint not found.&quot;</span><span class="p">,</span> <span class="n">fg</span><span class="o">=</span><span class="n">typer</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">RED</span><span class="p">)</span>
        <span class="k">raise</span> <span class="n">typer</span><span class="o">.</span><span class="n">Exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

    <span class="c1"># Update the endpoint fields if new values are provided</span>
    <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">endpoint</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">name</span>
    <span class="k">if</span> <span class="n">app_short_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">app_handler</span> <span class="o">=</span> <span class="n">DatabaseHandler</span><span class="p">(</span><span class="n">database</span><span class="o">.</span><span class="n">get_database_path</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">CONFIG_FILE_PATH</span><span class="p">,</span> <span class="s1">&#39;app&#39;</span><span class="p">))</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">app_id</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="nb">iter</span><span class="p">(</span><span class="n">app_handler</span><span class="o">.</span><span class="n">get_by_column</span><span class="p">(</span><span class="s2">&quot;short_name&quot;</span><span class="p">,</span> <span class="n">app_short_name</span><span class="p">)</span><span class="o">.</span><span class="n">item_list</span><span class="p">))</span>
            <span class="n">endpoint</span><span class="p">[</span><span class="s2">&quot;app_id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">app_id</span>
        <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
            <span class="n">typer</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;App </span><span class="si">{</span><span class="n">app_short_name</span><span class="si">}</span><span class="s2"> not found.&quot;</span><span class="p">,</span> <span class="n">fg</span><span class="o">=</span><span class="n">typer</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">RED</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">typer</span><span class="o">.</span><span class="n">Exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">url_endpoint</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">endpoint</span><span class="p">[</span><span class="s2">&quot;url_endpoint&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">url_endpoint</span>
    <span class="k">if</span> <span class="n">method</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">endpoint</span><span class="p">[</span><span class="s2">&quot;method&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">method</span>
    <span class="k">if</span> <span class="n">payload</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">endpoint</span><span class="p">[</span><span class="s2">&quot;payload&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">payload</span>
    <span class="k">if</span> <span class="n">filters</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">endpoint</span><span class="p">[</span><span class="s2">&quot;filters&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">filters</span>
    <span class="k">if</span> <span class="n">page_size</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">endpoint</span><span class="p">[</span><span class="s2">&quot;page_size&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">page_size</span>
    <span class="k">if</span> <span class="n">last_sync</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">endpoint</span><span class="p">[</span><span class="s2">&quot;last_sync&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">last_sync</span>
    <span class="k">if</span> <span class="n">process_status</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">endpoint</span><span class="p">[</span><span class="s2">&quot;process_status&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">process_status</span>
    <span class="k">if</span> <span class="n">status</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">endpoint</span><span class="p">[</span><span class="s2">&quot;status&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">status</span>

    <span class="n">endpoint_result</span> <span class="o">=</span> <span class="n">endpoints</span><span class="o">.</span><span class="n">update_endpoint</span><span class="p">(</span><span class="n">endpoint_id</span><span class="p">,</span> <span class="n">endpoint</span><span class="p">)</span>
    <span class="n">endpoint</span> <span class="o">=</span> <span class="n">endpoint_result</span><span class="o">.</span><span class="n">endpoint</span>
    <span class="n">error</span> <span class="o">=</span> <span class="n">endpoint_result</span><span class="o">.</span><span class="n">error</span>
    <span class="k">if</span> <span class="n">error</span><span class="p">:</span>
        <span class="n">typer</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span>
            <span class="sa">f</span><span class="s1">&#39;updating endpoint # </span><span class="si">{</span><span class="n">endpoint_id</span><span class="si">}</span><span class="s1"> failed with &quot;</span><span class="si">{</span><span class="n">ERRORS</span><span class="p">[</span><span class="n">error</span><span class="p">]</span><span class="si">}</span><span class="s1">&quot;&#39;</span><span class="p">,</span>
            <span class="n">fg</span><span class="o">=</span><span class="n">typer</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">RED</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;updating endpoint # </span><span class="si">{</span><span class="n">endpoint_id</span><span class="si">}</span><span class="s1"> failed with &quot;</span><span class="si">{</span><span class="n">ERRORS</span><span class="p">[</span><span class="n">error</span><span class="p">]</span><span class="si">}</span><span class="s1">&quot;&#39;</span><span class="p">)</span>
        <span class="k">raise</span> <span class="n">typer</span><span class="o">.</span><span class="n">Exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">typer</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;&quot;&quot;endpoint # </span><span class="si">{</span><span class="n">endpoint_id</span><span class="si">}</span><span class="s2"> updated successfully&quot;&quot;&quot;</span><span class="p">,</span>
            <span class="n">fg</span><span class="o">=</span><span class="n">typer</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">GREEN</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;endpoint # </span><span class="si">{</span><span class="n">endpoint_id</span><span class="si">}</span><span class="s2"> updated successfully&quot;&quot;&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="update_endpoint_process_status">
<a class="viewcode-back" href="../../autonomous_data_collection_agent.html#autonomous_data_collection_agent.cli.update_endpoint_process_status">[docs]</a>
<span class="nd">@app</span><span class="o">.</span><span class="n">command</span><span class="p">(</span><span class="s2">&quot;update-endpoint-process-status&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">update_endpoint_process_status</span><span class="p">(</span>
    <span class="n">endpoint_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Argument</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;ID of the endpoint to update&quot;</span><span class="p">),</span>
    <span class="n">process_status</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Option</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;--process-status&quot;</span><span class="p">,</span> <span class="s2">&quot;-prs&quot;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Endpoint process status (0=&gt;not processed, 1=&gt;inprocess, or 2=&gt;processed)&quot;</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The function `update_endpoint_process_status` updates the process status of an existing endpoint.</span>
<span class="sd">    </span>
<span class="sd">    :param endpoint_id: The `endpoint_id` parameter is a required argument that represents the ID of the</span>
<span class="sd">    endpoint you want to update</span>
<span class="sd">    :type endpoint_id: str</span>
<span class="sd">    :param process_status: The `process_status` parameter is an integer that represents the process</span>
<span class="sd">    status of an endpoint. It can have one of three values:</span>
<span class="sd">    :type process_status: int</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Example usage: python your_script.py update_process_endpoint --id &quot;231541323453553701&quot; --process-status 1</span>

    <span class="n">endpoints</span> <span class="o">=</span> <span class="n">get_endpoints</span><span class="p">()</span>
    <span class="n">endpoint_result</span> <span class="o">=</span> <span class="n">endpoints</span><span class="o">.</span><span class="n">update_endpoint_process_status</span><span class="p">(</span><span class="n">endpoint_id</span><span class="p">,</span> <span class="n">process_status</span><span class="p">)</span>
    <span class="n">error</span> <span class="o">=</span> <span class="n">endpoint_result</span><span class="o">.</span><span class="n">error</span>
    <span class="k">if</span> <span class="n">error</span><span class="p">:</span>
        <span class="n">typer</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span>
            <span class="sa">f</span><span class="s1">&#39;updating endpoint # </span><span class="si">{</span><span class="n">endpoint_id</span><span class="si">}</span><span class="s1"> failed with process status: &quot;</span><span class="si">{</span><span class="n">process_status</span><span class="si">}</span><span class="s1">&quot;&#39;</span><span class="p">,</span>
            <span class="n">fg</span><span class="o">=</span><span class="n">typer</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">RED</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;updating endpoint # </span><span class="si">{</span><span class="n">endpoint_id</span><span class="si">}</span><span class="s1"> failed with process status: &quot;</span><span class="si">{</span><span class="n">process_status</span><span class="si">}</span><span class="s1">&quot;&#39;</span><span class="p">)</span>
        <span class="k">raise</span> <span class="n">typer</span><span class="o">.</span><span class="n">Exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">typer</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;&quot;&quot;endpoint # </span><span class="si">{</span><span class="n">endpoint_id</span><span class="si">}</span><span class="s2"> updated successfully with process status: &quot;</span><span class="si">{</span><span class="n">process_status</span><span class="si">}</span><span class="s2">&quot; &quot;&quot;&quot;</span><span class="p">,</span>
            <span class="n">fg</span><span class="o">=</span><span class="n">typer</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">GREEN</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;endpoint # </span><span class="si">{</span><span class="n">endpoint_id</span><span class="si">}</span><span class="s2"> updated successfully with process status: &quot;</span><span class="si">{</span><span class="n">process_status</span><span class="si">}</span><span class="s2">&quot; &quot;&quot;&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="update_endpoint_status">
<a class="viewcode-back" href="../../autonomous_data_collection_agent.html#autonomous_data_collection_agent.cli.update_endpoint_status">[docs]</a>
<span class="nd">@app</span><span class="o">.</span><span class="n">command</span><span class="p">(</span><span class="s2">&quot;update-endpoint-status&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">update_endpoint_status</span><span class="p">(</span>
    <span class="n">endpoint_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Argument</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;ID of the endpoint to update&quot;</span><span class="p">),</span>
    <span class="n">status</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Option</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;--status&quot;</span><span class="p">,</span> <span class="s2">&quot;-s&quot;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Endpoint status (0=&gt;disabled, 1=&gt;enabled)&quot;</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The `update_endpoint_status` function updates the status of an existing endpoint with the provided</span>
<span class="sd">    endpoint ID.</span>
<span class="sd">    </span>
<span class="sd">    :param endpoint_id: The `endpoint_id` parameter is a required argument that represents the ID of the</span>
<span class="sd">    endpoint to update</span>
<span class="sd">    :type endpoint_id: str</span>
<span class="sd">    :param status: The `status` parameter is an integer that represents the status of the endpoint. It</span>
<span class="sd">    can have two possible values: 0 or 1</span>
<span class="sd">    :type status: int</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Example usage: python your_script.py update_endpoint --id &quot;231541323453553701&quot; --name &quot;Updated Name&quot; --app-name &quot;Updated App&quot; --method POST</span>

    <span class="n">endpoints</span> <span class="o">=</span> <span class="n">get_endpoints</span><span class="p">()</span>
    <span class="n">endpoint_result</span> <span class="o">=</span> <span class="n">endpoints</span><span class="o">.</span><span class="n">update_endpoint_status</span><span class="p">(</span><span class="n">endpoint_id</span><span class="p">,</span> <span class="n">status</span><span class="p">)</span>
    <span class="n">error</span> <span class="o">=</span> <span class="n">endpoint_result</span><span class="o">.</span><span class="n">error</span>
    <span class="n">status_txt</span> <span class="o">=</span> <span class="s2">&quot;enabled&quot;</span> <span class="k">if</span> <span class="n">status</span> <span class="o">==</span> <span class="mi">1</span> <span class="k">else</span> <span class="s2">&quot;disabled&quot;</span>

    <span class="k">if</span> <span class="n">error</span><span class="p">:</span>
        <span class="n">typer</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span>
            <span class="sa">f</span><span class="s1">&#39;updating endpoint # </span><span class="si">{</span><span class="n">endpoint_id</span><span class="si">}</span><span class="s1"> failed with status: &quot;</span><span class="si">{</span><span class="n">status_txt</span><span class="si">}</span><span class="s1">&quot;&#39;</span><span class="p">,</span>
            <span class="n">fg</span><span class="o">=</span><span class="n">typer</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">RED</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;updating endpoint # </span><span class="si">{</span><span class="n">endpoint_id</span><span class="si">}</span><span class="s1"> failed with status: &quot;</span><span class="si">{</span><span class="n">status_txt</span><span class="si">}</span><span class="s1">&quot;&#39;</span><span class="p">)</span>
        <span class="k">raise</span> <span class="n">typer</span><span class="o">.</span><span class="n">Exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">typer</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;&quot;&quot;endpoint # </span><span class="si">{</span><span class="n">endpoint_id</span><span class="si">}</span><span class="s2"> updated successfully with status: &quot;</span><span class="si">{</span><span class="n">status_txt</span><span class="si">}</span><span class="s2">&quot; &quot;&quot;&quot;</span><span class="p">,</span>
            <span class="n">fg</span><span class="o">=</span><span class="n">typer</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">GREEN</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;endpoint # </span><span class="si">{</span><span class="n">endpoint_id</span><span class="si">}</span><span class="s2"> updated successfully with status: &quot;</span><span class="si">{</span><span class="n">status_txt</span><span class="si">}</span><span class="s2">&quot; &quot;&quot;&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="remove_endpoint">
<a class="viewcode-back" href="../../autonomous_data_collection_agent.html#autonomous_data_collection_agent.cli.remove_endpoint">[docs]</a>
<span class="nd">@app</span><span class="o">.</span><span class="n">command</span><span class="p">(</span><span class="s2">&quot;remove-endpoint&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">remove_endpoint</span><span class="p">(</span>
    <span class="n">endpoint_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Argument</span><span class="p">(</span><span class="o">...</span><span class="p">),</span>
    <span class="n">force</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Option</span><span class="p">(</span>
        <span class="kc">False</span><span class="p">,</span>
        <span class="s2">&quot;--force&quot;</span><span class="p">,</span>
        <span class="s2">&quot;-f&quot;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Force deletion without confirmation.&quot;</span><span class="p">,</span>
    <span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The `remove_endpoint` function removes an endpoint using its endpoint ID, with an option to force</span>
<span class="sd">    deletion without confirmation.</span>
<span class="sd">    </span>
<span class="sd">    :param endpoint_id: The `endpoint_id` parameter is a required argument that represents the ID of the</span>
<span class="sd">    endpoint to be removed</span>
<span class="sd">    :type endpoint_id: str</span>
<span class="sd">    :param force: The `force` parameter is a boolean option that allows you to force the deletion of the</span>
<span class="sd">    endpoint without any confirmation prompt. If `force` is set to `True`, the endpoint will be removed</span>
<span class="sd">    immediately without any further checks or prompts. If `force` is set to `False` (the default</span>
<span class="sd">    :type force: bool</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">endpoints</span> <span class="o">=</span> <span class="n">get_endpoints</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_remove</span><span class="p">():</span>
        <span class="n">endpoint_result</span> <span class="o">=</span> <span class="n">endpoints</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">endpoint_id</span><span class="p">)</span>
        <span class="n">error</span> <span class="o">=</span> <span class="n">endpoint_result</span><span class="o">.</span><span class="n">error</span>
        <span class="k">if</span> <span class="n">error</span><span class="p">:</span>
            <span class="n">typer</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span>
                <span class="sa">f</span><span class="s1">&#39;Removing endpoint # </span><span class="si">{</span><span class="n">endpoint_id</span><span class="si">}</span><span class="s1"> failed with &quot;</span><span class="si">{</span><span class="n">ERRORS</span><span class="p">[</span><span class="n">error</span><span class="p">]</span><span class="si">}</span><span class="s1">&quot;&#39;</span><span class="p">,</span>
                <span class="n">fg</span><span class="o">=</span><span class="n">typer</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">RED</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Removing endpoint # </span><span class="si">{</span><span class="n">endpoint_id</span><span class="si">}</span><span class="s1"> failed with &quot;</span><span class="si">{</span><span class="n">ERRORS</span><span class="p">[</span><span class="n">error</span><span class="p">]</span><span class="si">}</span><span class="s1">&quot;&#39;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">typer</span><span class="o">.</span><span class="n">Exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">typer</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;&quot;&quot;endpoint # </span><span class="si">{</span><span class="n">endpoint_id</span><span class="si">}</span><span class="s2"> was removed&quot;&quot;&quot;</span><span class="p">,</span>
                <span class="n">fg</span><span class="o">=</span><span class="n">typer</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">GREEN</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;endpoint # </span><span class="si">{</span><span class="n">endpoint_id</span><span class="si">}</span><span class="s2"> was removed&quot;&quot;&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">force</span><span class="p">:</span>
        <span class="n">_remove</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">endpoint_result</span> <span class="o">=</span> <span class="n">endpoints</span><span class="o">.</span><span class="n">get_endpoint_by_id</span><span class="p">(</span><span class="n">endpoint_id</span><span class="p">)</span>
            <span class="n">endpoint</span> <span class="o">=</span> <span class="n">endpoint_result</span><span class="o">.</span><span class="n">endpoint</span>
            <span class="n">error</span> <span class="o">=</span> <span class="n">endpoint_result</span><span class="o">.</span><span class="n">error</span>
            <span class="k">if</span> <span class="n">error</span><span class="p">:</span>
                <span class="n">typer</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span><span class="s2">&quot;Invalid ENDPOINT_ID&quot;</span><span class="p">,</span> <span class="n">fg</span><span class="o">=</span><span class="n">typer</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">RED</span><span class="p">)</span>
                <span class="k">raise</span> <span class="n">typer</span><span class="o">.</span><span class="n">Exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
            <span class="n">typer</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span><span class="s2">&quot;Invalid ENDPOINT_ID&quot;</span><span class="p">,</span> <span class="n">fg</span><span class="o">=</span><span class="n">typer</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">RED</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">typer</span><span class="o">.</span><span class="n">Exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">delete</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Delete endpoint # </span><span class="si">{</span><span class="n">endpoint_id</span><span class="si">}</span><span class="s2"> with name : </span><span class="si">{</span><span class="n">endpoint</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">?&quot;</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">delete</span><span class="p">:</span>
            <span class="n">_remove</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">typer</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="s2">&quot;Operation canceled&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="remove_app_endpoints">
<a class="viewcode-back" href="../../autonomous_data_collection_agent.html#autonomous_data_collection_agent.cli.remove_app_endpoints">[docs]</a>
<span class="nd">@app</span><span class="o">.</span><span class="n">command</span><span class="p">(</span><span class="s2">&quot;remove-app-endpoints&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">remove_app_endpoints</span><span class="p">(</span>
    <span class="n">app_short_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Argument</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;New application short name&quot;</span><span class="p">),</span>
    <span class="n">force</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Option</span><span class="p">(</span>
        <span class="kc">False</span><span class="p">,</span>
        <span class="s2">&quot;--force&quot;</span><span class="p">,</span>
        <span class="s2">&quot;-f&quot;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Force deletion without confirmation.&quot;</span><span class="p">,</span>
    <span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The `remove_app_endpoints` function removes endpoints associated with a given application short</span>
<span class="sd">    name, with an option to force deletion without confirmation.</span>
<span class="sd">    </span>
<span class="sd">    :param app_short_name: The `app_short_name` parameter is a required argument that represents the</span>
<span class="sd">    short name of the application for which the endpoints need to be removed</span>
<span class="sd">    :type app_short_name: str</span>
<span class="sd">    :param force: A boolean flag that indicates whether to force the deletion of endpoints without</span>
<span class="sd">    confirmation. If set to True, the endpoints will be removed without any further prompts</span>
<span class="sd">    :type force: bool</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">endpoints</span> <span class="o">=</span> <span class="n">get_endpoints</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_remove</span><span class="p">():</span>
        <span class="n">endpoint_obj</span> <span class="o">=</span> <span class="n">endpoints</span><span class="o">.</span><span class="n">remove_all_by_app</span><span class="p">(</span><span class="n">app_short_name</span><span class="p">)</span>
        <span class="n">error</span> <span class="o">=</span> <span class="n">endpoint_obj</span><span class="o">.</span><span class="n">error</span>
        <span class="k">if</span> <span class="n">error</span><span class="p">:</span>
            <span class="n">typer</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span>
                <span class="sa">f</span><span class="s1">&#39;Removing endpoints for app # </span><span class="si">{</span><span class="n">app_short_name</span><span class="si">}</span><span class="s1"> failed with &quot;</span><span class="si">{</span><span class="n">ERRORS</span><span class="p">[</span><span class="n">error</span><span class="p">]</span><span class="si">}</span><span class="s1">&quot;&#39;</span><span class="p">,</span>
                <span class="n">fg</span><span class="o">=</span><span class="n">typer</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">RED</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Removing endpoints for app # </span><span class="si">{</span><span class="n">app_short_name</span><span class="si">}</span><span class="s1"> failed with &quot;</span><span class="si">{</span><span class="n">ERRORS</span><span class="p">[</span><span class="n">error</span><span class="p">]</span><span class="si">}</span><span class="s1">&quot;&#39;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">typer</span><span class="o">.</span><span class="n">Exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">typer</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;&quot;&quot;endpoints for app # </span><span class="si">{</span><span class="n">app_short_name</span><span class="si">}</span><span class="s2"> was removed.&quot;&quot;&quot;</span><span class="p">,</span>
                <span class="n">fg</span><span class="o">=</span><span class="n">typer</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">GREEN</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;endpoints for app # </span><span class="si">{</span><span class="n">app_short_name</span><span class="si">}</span><span class="s2"> was removed.&quot;&quot;&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">force</span><span class="p">:</span>
        <span class="n">_remove</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">delete</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Delete endpoints with app short name : </span><span class="si">{</span><span class="n">app_short_name</span><span class="si">}</span><span class="s2">?&quot;</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">delete</span><span class="p">:</span>
            <span class="n">_remove</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">typer</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="s2">&quot;Operation canceled&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="remove_all_endpoints">
<a class="viewcode-back" href="../../autonomous_data_collection_agent.html#autonomous_data_collection_agent.cli.remove_all_endpoints">[docs]</a>
<span class="nd">@app</span><span class="o">.</span><span class="n">command</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;clear-endpoints&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">remove_all_endpoints</span><span class="p">(</span>
    <span class="n">force</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Option</span><span class="p">(</span>
        <span class="kc">False</span><span class="p">,</span>
        <span class="n">prompt</span><span class="o">=</span><span class="s2">&quot;Delete all endpoints?&quot;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Force deletion without confirmation.&quot;</span><span class="p">,</span>
    <span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The function `remove_all_endpoints` removes all endpoints, with an option to force deletion without</span>
<span class="sd">    confirmation.</span>
<span class="sd">    </span>
<span class="sd">    :param force: The `force` parameter is a boolean flag that determines whether to delete all</span>
<span class="sd">    endpoints without confirmation. If `force` is set to `True`, the function will proceed with deleting</span>
<span class="sd">    all endpoints. If `force` is set to `False` (the default value), the function will prompt the user</span>
<span class="sd">    for</span>
<span class="sd">    :type force: bool</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">endpoints</span> <span class="o">=</span> <span class="n">get_endpoints</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">force</span><span class="p">:</span>
        <span class="n">error</span> <span class="o">=</span> <span class="n">endpoints</span><span class="o">.</span><span class="n">remove_all</span><span class="p">()</span><span class="o">.</span><span class="n">error</span>
        <span class="k">if</span> <span class="n">error</span><span class="p">:</span>
            <span class="n">typer</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span>
                <span class="sa">f</span><span class="s1">&#39;Removing endpoints failed with &quot;</span><span class="si">{</span><span class="n">ERRORS</span><span class="p">[</span><span class="n">error</span><span class="p">]</span><span class="si">}</span><span class="s1">&quot;&#39;</span><span class="p">,</span>
                <span class="n">fg</span><span class="o">=</span><span class="n">typer</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">RED</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Removing endpoints failed with &quot;</span><span class="si">{</span><span class="n">ERRORS</span><span class="p">[</span><span class="n">error</span><span class="p">]</span><span class="si">}</span><span class="s1">&quot;&#39;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">typer</span><span class="o">.</span><span class="n">Exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">typer</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span><span class="s2">&quot;All endpoints were removed&quot;</span><span class="p">,</span> <span class="n">fg</span><span class="o">=</span><span class="n">typer</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">GREEN</span><span class="p">)</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;All endpoints were removed&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">typer</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="s2">&quot;Operation canceled&quot;</span><span class="p">)</span></div>


<span class="c1"># The class `UrlSchemes` is an enumeration that represents different URL schemes, such as &quot;http&quot; and</span>
<span class="c1"># &quot;https&quot;.</span>
<div class="viewcode-block" id="UrlSchemes">
<a class="viewcode-back" href="../../autonomous_data_collection_agent.html#autonomous_data_collection_agent.cli.UrlSchemes">[docs]</a>
<span class="k">class</span> <span class="nc">UrlSchemes</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
    <span class="n">http</span> <span class="o">=</span> <span class="s2">&quot;http&quot;</span>
    <span class="n">https</span> <span class="o">=</span> <span class="s2">&quot;https&quot;</span></div>


<span class="c1"># The AuthTypes class is an enumeration that represents different types of authentication.</span>
<div class="viewcode-block" id="AuthTypes">
<a class="viewcode-back" href="../../autonomous_data_collection_agent.html#autonomous_data_collection_agent.cli.AuthTypes">[docs]</a>
<span class="k">class</span> <span class="nc">AuthTypes</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
    <span class="n">NONE</span> <span class="o">=</span> <span class="s2">&quot;NONE&quot;</span>
    <span class="n">BASIC</span> <span class="o">=</span> <span class="s2">&quot;BASIC&quot;</span>
    <span class="n">KEYCLOAK</span> <span class="o">=</span> <span class="s2">&quot;KEYCLOAK&quot;</span></div>


<div class="viewcode-block" id="add_application">
<a class="viewcode-back" href="../../autonomous_data_collection_agent.html#autonomous_data_collection_agent.cli.add_application">[docs]</a>
<span class="nd">@app</span><span class="o">.</span><span class="n">command</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;add-app&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">add_application</span><span class="p">(</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Argument</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Name of the application&quot;</span><span class="p">),</span>
    <span class="n">short_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Option</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="s2">&quot;--short-name&quot;</span><span class="p">,</span> <span class="s2">&quot;-sn&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Short name of the application&quot;</span><span class="p">),</span>
    <span class="n">host</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Option</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="s2">&quot;--host&quot;</span><span class="p">,</span> <span class="s2">&quot;-h&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Host of the application&quot;</span><span class="p">),</span>
    <span class="n">url_scheme</span><span class="p">:</span> <span class="n">UrlSchemes</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Option</span><span class="p">(</span><span class="s2">&quot;https&quot;</span><span class="p">,</span> <span class="s2">&quot;--url-scheme&quot;</span><span class="p">,</span> <span class="s2">&quot;-u&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;URL scheme (http or https)&quot;</span><span class="p">),</span>
    <span class="n">auth_type</span><span class="p">:</span> <span class="n">AuthTypes</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Option</span><span class="p">(</span><span class="s2">&quot;NONE&quot;</span><span class="p">,</span> <span class="s2">&quot;--auth-type&quot;</span><span class="p">,</span> <span class="s2">&quot;-at&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Authentication type (NONE, KEYCLOAK, BASIC)&quot;</span><span class="p">),</span>
    <span class="n">auth_data</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Option</span><span class="p">({},</span> <span class="s2">&quot;--authdata&quot;</span><span class="p">,</span> <span class="s2">&quot;-c&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;JSON payload for the authdata&quot;</span><span class="p">),</span>
    <span class="n">dump_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Option</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="s2">&quot;--dump-path&quot;</span><span class="p">,</span> <span class="s2">&quot;-d&quot;</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="n">autonomousagent</span><span class="o">.</span><span class="n">Applications</span><span class="o">.</span><span class="n">check_and_create_directory</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Path for dumping the files&quot;</span><span class="p">),</span> 
    <span class="n">sync_frequency</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Option</span><span class="p">(</span>
        <span class="s2">&quot;0 23 * * *&quot;</span><span class="p">,</span> 
        <span class="s2">&quot;--sync-frequency&quot;</span><span class="p">,</span> 
        <span class="s2">&quot;-sf&quot;</span><span class="p">,</span>
        <span class="n">callback</span><span class="o">=</span><span class="n">autonomousagent</span><span class="o">.</span><span class="n">Applications</span><span class="o">.</span><span class="n">is_valid_cronjob</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Sync frequency (cronjob) */30 * * * *&quot;</span>
    <span class="p">),</span>
    <span class="n">last_sync</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Option</span><span class="p">(</span>
        <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;--next-sync&quot;</span><span class="p">,</span>
        <span class="s2">&quot;-n&quot;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Last synchronization date and time in the format &#39;DD-MM-YYYY hh:mm:ss&#39;&quot;</span><span class="p">,</span>
        <span class="n">callback</span><span class="o">=</span><span class="n">validate_datetime</span><span class="p">,</span>
    <span class="p">),</span>
    <span class="n">next_sync</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Option</span><span class="p">(</span>
        <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;--last-sync&quot;</span><span class="p">,</span>
        <span class="s2">&quot;-l&quot;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Last synchronization date and time in the format &#39;DD-MM-YYYY hh:mm:ss&#39;&quot;</span><span class="p">,</span>
        <span class="n">callback</span><span class="o">=</span><span class="n">validate_datetime</span><span class="p">,</span>
    <span class="p">),</span>
    <span class="n">default_payload</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Option</span><span class="p">({},</span> <span class="s2">&quot;--payload&quot;</span><span class="p">,</span> <span class="s2">&quot;-p&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;JSON payload for the request&quot;</span><span class="p">),</span>
    <span class="n">default_filters</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Option</span><span class="p">([],</span> <span class="s2">&quot;--filters&quot;</span><span class="p">,</span> <span class="s2">&quot;-df&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Filters as a list of fitler dictionaries&quot;</span><span class="p">),</span> 
    <span class="n">default_page_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Option</span><span class="p">(</span><span class="mi">1000</span><span class="p">,</span> <span class="s2">&quot;--default-page-size&quot;</span><span class="p">,</span> <span class="s2">&quot;-dp&quot;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">10000</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Default page size (1000)&quot;</span><span class="p">),</span>
    <span class="n">process_status</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Option</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;--process-status&quot;</span><span class="p">,</span> <span class="s2">&quot;-prs&quot;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Process status (0=&gt;not processed, 1=&gt;inprocess, or 2=&gt;processed)&quot;</span><span class="p">),</span>
    <span class="n">status</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Option</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;--status&quot;</span><span class="p">,</span> <span class="s2">&quot;-s&quot;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Applicaiton status (0=&gt;disabled, 1=&gt;enabled)&quot;</span><span class="p">),</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The `add_application` function adds a new application with the provided details.</span>
<span class="sd">    </span>
<span class="sd">    :param name: The `name` parameter is a required argument that specifies the name of the application</span>
<span class="sd">    :type name: str</span>
<span class="sd">    :param short_name: The `short_name` parameter is an optional short name for the application. It can</span>
<span class="sd">    be provided using the `--short-name` or `-sn` option when calling the `add_application` function</span>
<span class="sd">    :type short_name: str</span>
<span class="sd">    :param host: The `host` parameter is used to specify the host of the application. It is a required</span>
<span class="sd">    parameter and must be provided when calling the `add_application` function</span>
<span class="sd">    :type host: str</span>
<span class="sd">    :param url_scheme: The `url_scheme` parameter is used to specify the URL scheme for the application.</span>
<span class="sd">    It is an optional parameter with a default value of &quot;https&quot;. The available options for this</span>
<span class="sd">    parameter are &quot;http&quot; and &quot;https&quot;</span>
<span class="sd">    :type url_scheme: UrlSchemes</span>
<span class="sd">    :param auth_type: The `auth_type` parameter is used to specify the authentication type for the</span>
<span class="sd">    application. It can have one of the following values:</span>
<span class="sd">    :type auth_type: AuthTypes</span>
<span class="sd">    :param auth_data: The `auth_data` parameter is a JSON payload for the authentication data. It is</span>
<span class="sd">    used to provide additional information required for authentication, such as credentials or tokens</span>
<span class="sd">    :type auth_data: str</span>
<span class="sd">    :param dump_path: The `dump_path` parameter is used to specify the path where the files will be</span>
<span class="sd">    dumped. It is a required parameter and should be provided when calling the `add_application`</span>
<span class="sd">    function</span>
<span class="sd">    :type dump_path: str</span>
<span class="sd">    :param sync_frequency: The `sync_frequency` parameter is used to specify the frequency at which the</span>
<span class="sd">    application should be synchronized. It takes a cronjob expression as its value. For example, `0 23 *</span>
<span class="sd">    * *` means the synchronization should occur every day at 23:00</span>
<span class="sd">    :type sync_frequency: str</span>
<span class="sd">    :param last_sync: The `last_sync` parameter is used to specify the last synchronization date and</span>
<span class="sd">    time for the application. It should be provided in the format &#39;DD-MM-YYYY hh:mm:ss&#39;. If not</span>
<span class="sd">    provided, it can be set to `None`</span>
<span class="sd">    :type last_sync: str</span>
<span class="sd">    :param next_sync: The `next_sync` parameter is used to specify the last synchronization date and</span>
<span class="sd">    time for the application. It should be provided in the format &#39;DD-MM-YYYY hh:mm:ss&#39;. If not</span>
<span class="sd">    provided, it can be set to `None`</span>
<span class="sd">    :type next_sync: str</span>
<span class="sd">    :param default_payload: The `default_payload` parameter is used to specify a JSON payload for the</span>
<span class="sd">    request. It allows you to provide default data that will be sent along with the request when</span>
<span class="sd">    interacting with the application</span>
<span class="sd">    :type default_payload: str</span>
<span class="sd">    :param default_filters: The `default_filters` parameter is a list of filter dictionaries. Each</span>
<span class="sd">    dictionary represents a filter that can be applied to the application data. The filters are used to</span>
<span class="sd">    retrieve specific data from the application</span>
<span class="sd">    :type default_filters: str</span>
<span class="sd">    :param default_page_size: The `default_page_size` parameter is an integer option that specifies the</span>
<span class="sd">    default page size for the application. It determines the number of items or records that will be</span>
<span class="sd">    returned in each page of data when making requests to the application. The default value is set to</span>
<span class="sd">    1000, but it can be customized</span>
<span class="sd">    :type default_page_size: int</span>
<span class="sd">    :param process_status: The `process_status` parameter is used to specify the process status of the</span>
<span class="sd">    application. It can have one of the following values:</span>
<span class="sd">    :type process_status: int</span>
<span class="sd">    :param status: The `status` parameter is used to specify the status of the application. It can have</span>
<span class="sd">    three possible values:</span>
<span class="sd">    :type status: int</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">last_sync_datetime</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">last_sync</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">%d</span><span class="s1">-%m-%Y %H:%M:%S&#39;</span><span class="p">)</span> <span class="k">if</span> <span class="n">last_sync</span>  <span class="k">else</span> <span class="kc">None</span>
    <span class="n">next_sync_datetime</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">next_sync</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">%d</span><span class="s1">-%m-%Y %H:%M:%S&#39;</span><span class="p">)</span> <span class="k">if</span> <span class="n">next_sync</span> <span class="k">else</span> <span class="kc">None</span>

    <span class="n">applications</span> <span class="o">=</span> <span class="n">get_applications</span><span class="p">()</span>
    <span class="n">application_result</span> <span class="o">=</span> <span class="n">applications</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
        <span class="n">name</span><span class="p">,</span> <span class="n">short_name</span><span class="p">,</span> <span class="n">host</span><span class="p">,</span> <span class="n">url_scheme</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">auth_type</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">auth_data</span><span class="p">,</span> <span class="n">dump_path</span><span class="p">,</span> <span class="n">sync_frequency</span><span class="p">,</span> <span class="n">last_sync_datetime</span><span class="p">,</span> <span class="n">next_sync_datetime</span><span class="p">,</span> <span class="n">default_payload</span><span class="p">,</span> <span class="n">default_filters</span><span class="p">,</span> <span class="n">default_page_size</span><span class="p">,</span> <span class="n">process_status</span><span class="p">,</span> <span class="n">status</span>
    <span class="p">)</span>
    <span class="n">application</span> <span class="o">=</span> <span class="n">application_result</span><span class="o">.</span><span class="n">application</span>
    <span class="n">error</span> <span class="o">=</span> <span class="n">application_result</span><span class="o">.</span><span class="n">error</span>
    <span class="k">if</span> <span class="n">error</span><span class="p">:</span>
        <span class="n">typer</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span>
            <span class="sa">f</span><span class="s1">&#39;Adding application failed with &quot;</span><span class="si">{</span><span class="n">ERRORS</span><span class="p">[</span><span class="n">error</span><span class="p">]</span><span class="si">}</span><span class="s1">&quot;&#39;</span><span class="p">,</span> <span class="n">fg</span><span class="o">=</span><span class="n">typer</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">RED</span>
        <span class="p">)</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Adding application failed with &quot;</span><span class="si">{</span><span class="n">ERRORS</span><span class="p">[</span><span class="n">error</span><span class="p">]</span><span class="si">}</span><span class="s1">&quot;&#39;</span><span class="p">)</span>
        <span class="k">raise</span> <span class="n">typer</span><span class="o">.</span><span class="n">Exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">typer</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Application &#39;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39; was added. ID: #&#39;</span><span class="si">{</span><span class="n">application</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">,</span> <span class="n">fg</span><span class="o">=</span><span class="n">typer</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">GREEN</span><span class="p">)</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Application #&#39;</span><span class="si">{</span><span class="n">application</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">&#39; was added&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="update_application">
<a class="viewcode-back" href="../../autonomous_data_collection_agent.html#autonomous_data_collection_agent.cli.update_application">[docs]</a>
<span class="nd">@app</span><span class="o">.</span><span class="n">command</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;update-app&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">update_application</span><span class="p">(</span>
    <span class="n">app_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Argument</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;ID of the application to update&quot;</span><span class="p">),</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Option</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;--name&quot;</span><span class="p">,</span> <span class="s2">&quot;-n&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Name of the application&quot;</span><span class="p">),</span>
    <span class="n">short_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Option</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;--short-name&quot;</span><span class="p">,</span> <span class="s2">&quot;-sn&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Short name of the application&quot;</span><span class="p">),</span>
    <span class="n">host</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Option</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;--host&quot;</span><span class="p">,</span> <span class="s2">&quot;-h&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Host of the application&quot;</span><span class="p">),</span>
    <span class="n">url_scheme</span><span class="p">:</span> <span class="n">UrlSchemes</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Option</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;--url-scheme&quot;</span><span class="p">,</span> <span class="s2">&quot;-u&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;URL scheme (http or https)&quot;</span><span class="p">),</span>
    <span class="n">auth_type</span><span class="p">:</span> <span class="n">AuthTypes</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Option</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;--auth-type&quot;</span><span class="p">,</span> <span class="s2">&quot;-at&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Authentication type (NA, KEYCLOAK, BASIC)&quot;</span><span class="p">),</span>
    <span class="n">auth_data</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Option</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;--authdata&quot;</span><span class="p">,</span> <span class="s2">&quot;-ad&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;JSON payload for the authdata&quot;</span><span class="p">),</span>
    <span class="n">dump_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Option</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;--dump-path&quot;</span><span class="p">,</span> <span class="s2">&quot;-dp&quot;</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="n">autonomousagent</span><span class="o">.</span><span class="n">Applications</span><span class="o">.</span><span class="n">check_and_create_directory</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Path for dumping the files&quot;</span><span class="p">),</span> 
    <span class="n">sync_frequency</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Option</span><span class="p">(</span>
        <span class="kc">None</span><span class="p">,</span> 
        <span class="s2">&quot;--sync-frequency&quot;</span><span class="p">,</span> 
        <span class="s2">&quot;-sf&quot;</span><span class="p">,</span>
        <span class="n">callback</span><span class="o">=</span><span class="n">autonomousagent</span><span class="o">.</span><span class="n">Applications</span><span class="o">.</span><span class="n">is_valid_cronjob</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Sync frequency (cronjob) */30 * * * *&quot;</span>
    <span class="p">),</span>
    <span class="n">last_sync</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Option</span><span class="p">(</span>
        <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;--next-sync&quot;</span><span class="p">,</span>
        <span class="s2">&quot;-ns&quot;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Last synchronization date and time in the format &#39;DD-MM-YYYY hh:mm:ss&#39;&quot;</span><span class="p">,</span>
        <span class="n">callback</span><span class="o">=</span><span class="n">validate_datetime</span><span class="p">,</span>
    <span class="p">),</span>
    <span class="n">next_sync</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Option</span><span class="p">(</span>
        <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;--last-sync&quot;</span><span class="p">,</span>
        <span class="s2">&quot;-ls&quot;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Last synchronization date and time in the format &#39;DD-MM-YYYY hh:mm:ss&#39;&quot;</span><span class="p">,</span>
        <span class="n">callback</span><span class="o">=</span><span class="n">validate_datetime</span><span class="p">,</span>
    <span class="p">),</span>
    <span class="n">default_payload</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Option</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;--payload&quot;</span><span class="p">,</span> <span class="s2">&quot;-p&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;JSON payload for the request&quot;</span><span class="p">),</span>
    <span class="n">default_filters</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Option</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;--filters&quot;</span><span class="p">,</span> <span class="s2">&quot;-df&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Filters as a list of fitler dictionaries&quot;</span><span class="p">),</span> 
    <span class="n">default_page_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Option</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;--default-page-size&quot;</span><span class="p">,</span> <span class="s2">&quot;-dp&quot;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">10000</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Default page size (1000)&quot;</span><span class="p">),</span>
    <span class="n">process_status</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Option</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;--process-status&quot;</span><span class="p">,</span> <span class="s2">&quot;-prs&quot;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Process status (0=&gt;not processed, 1=&gt;inprocess, or 2=&gt;processed)&quot;</span><span class="p">),</span>
    <span class="n">status</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Option</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;--status&quot;</span><span class="p">,</span> <span class="s2">&quot;-s&quot;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Application status (0=&gt;disabled, 1=&gt;enabled)&quot;</span><span class="p">),</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The `update_application` function updates an existing application with the provided details.</span>
<span class="sd">    </span>
<span class="sd">    :param app_id: The `app_id` parameter is the ID of the application that you want to update. It is a</span>
<span class="sd">    required argument and must be provided when calling the `update_application` function</span>
<span class="sd">    :type app_id: str</span>
<span class="sd">    :param name: The `name` parameter is used to specify the name of the application to be updated</span>
<span class="sd">    :type name: str</span>
<span class="sd">    :param short_name: The `short_name` parameter is used to specify the short name of the application.</span>
<span class="sd">    It is an optional parameter that can be provided when updating an existing application</span>
<span class="sd">    :type short_name: str</span>
<span class="sd">    :param host: The `host` parameter is used to specify the host of the application. It is an optional</span>
<span class="sd">    parameter that can be provided when updating an existing application</span>
<span class="sd">    :type host: str</span>
<span class="sd">    :param url_scheme: The `url_scheme` parameter is used to specify the URL scheme for the application.</span>
<span class="sd">    It is an optional parameter and can be set using the `--url-scheme` or `-u` option. The value of</span>
<span class="sd">    `url_scheme` should be one of the values defined in the `UrlSchemes</span>
<span class="sd">    :type url_scheme: UrlSchemes</span>
<span class="sd">    :param auth_type: The `auth_type` parameter is used to specify the authentication type for the</span>
<span class="sd">    application. It accepts three possible values: &quot;NA&quot; (no authentication), &quot;KEYCLOAK&quot; (Keycloak</span>
<span class="sd">    authentication), or &quot;BASIC&quot; (basic authentication)</span>
<span class="sd">    :type auth_type: AuthTypes</span>
<span class="sd">    :param auth_data: The `auth_data` parameter is used to provide a JSON payload for the authentication</span>
<span class="sd">    data. This can be used to pass any additional information required for authentication, such as API</span>
<span class="sd">    keys or tokens</span>
<span class="sd">    :type auth_data: str</span>
<span class="sd">    :param dump_path: The `dump_path` parameter is used to specify the path where files will be dumped.</span>
<span class="sd">    It is an optional parameter that accepts a string value</span>
<span class="sd">    :type dump_path: str</span>
<span class="sd">    :param sync_frequency: The `sync_frequency` parameter is used to specify the synchronization</span>
<span class="sd">    frequency for the application. It takes a cronjob format string as its value. For example, `*/30 * *</span>
<span class="sd">    * *` means the application will be synchronized every 30 minutes</span>
<span class="sd">    :type sync_frequency: str</span>
<span class="sd">    :param last_sync: The `last_sync` parameter is used to specify the last synchronization date and</span>
<span class="sd">    time for the application. It should be provided in the format &#39;DD-MM-YYYY hh:mm:ss&#39;</span>
<span class="sd">    :type last_sync: str</span>
<span class="sd">    :param next_sync: The `next_sync` parameter is used to specify the last synchronization date and</span>
<span class="sd">    time for the application being updated. It should be provided in the format &#39;DD-MM-YYYY hh:mm:ss&#39;</span>
<span class="sd">    :type next_sync: str</span>
<span class="sd">    :param default_payload: The `default_payload` parameter is used to specify a JSON payload for the</span>
<span class="sd">    request. This payload will be sent along with the request when the application is used</span>
<span class="sd">    :type default_payload: str</span>
<span class="sd">    :param default_filters: The `default_filters` parameter is used to specify filters for the</span>
<span class="sd">    application. It should be provided as a string representing a list of filter dictionaries. Each</span>
<span class="sd">    filter dictionary should contain the filter name and value. For example:</span>
<span class="sd">    :type default_filters: str</span>
<span class="sd">    :param default_page_size: The `default_page_size` parameter is an optional integer parameter that</span>
<span class="sd">    specifies the default page size for pagination. It determines the number of items returned per page</span>
<span class="sd">    when making requests to the application. The value should be between 1 and 10000</span>
<span class="sd">    :type default_page_size: int</span>
<span class="sd">    :param process_status: The `process_status` parameter is used to specify the process status of the</span>
<span class="sd">    application. It can have one of the following values:</span>
<span class="sd">    :type process_status: int</span>
<span class="sd">    :param status: The `status` parameter is used to specify the status of the application. It can have</span>
<span class="sd">    three possible values:</span>
<span class="sd">    :type status: int</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">applications</span> <span class="o">=</span> <span class="n">get_applications</span><span class="p">()</span>
    <span class="n">application_result</span> <span class="o">=</span> <span class="n">applications</span><span class="o">.</span><span class="n">get_app_by_id</span><span class="p">(</span><span class="n">app_id</span><span class="p">)</span>
    <span class="n">application</span> <span class="o">=</span> <span class="n">application_result</span><span class="o">.</span><span class="n">application</span>
    <span class="n">error</span> <span class="o">=</span> <span class="n">application_result</span><span class="o">.</span><span class="n">error</span>

    <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">application</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">name</span>
    <span class="k">if</span> <span class="n">short_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">application</span><span class="p">[</span><span class="s2">&quot;short_name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">short_name</span>
    <span class="k">if</span> <span class="n">host</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">application</span><span class="p">[</span><span class="s2">&quot;host&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">host</span>
    <span class="k">if</span> <span class="n">url_scheme</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">application</span><span class="p">[</span><span class="s2">&quot;url_scheme&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">url_scheme</span><span class="o">.</span><span class="n">value</span>
    <span class="k">if</span> <span class="n">auth_type</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">application</span><span class="p">[</span><span class="s2">&quot;auth_type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">auth_type</span><span class="o">.</span><span class="n">value</span>
    <span class="k">if</span> <span class="n">auth_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">application</span><span class="p">[</span><span class="s2">&quot;auth_data&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">auth_data</span>
    <span class="k">if</span> <span class="n">dump_path</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">application</span><span class="p">[</span><span class="s2">&quot;dump_path&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">dump_path</span>
    <span class="k">if</span> <span class="n">sync_frequency</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">application</span><span class="p">[</span><span class="s2">&quot;sync_frequency&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sync_frequency</span>
    <span class="k">if</span> <span class="n">last_sync</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">application</span><span class="p">[</span><span class="s2">&quot;last_sync&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">last_sync</span>
    <span class="k">if</span> <span class="n">next_sync</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">application</span><span class="p">[</span><span class="s2">&quot;next_sync&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">next_sync</span>
    <span class="k">if</span> <span class="n">default_payload</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">application</span><span class="p">[</span><span class="s2">&quot;default_payload&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">default_payload</span>
    <span class="k">if</span> <span class="n">default_filters</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">application</span><span class="p">[</span><span class="s2">&quot;default_filters&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">default_filters</span>
    <span class="k">if</span> <span class="n">default_page_size</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">application</span><span class="p">[</span><span class="s2">&quot;default_page_size&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">default_page_size</span>
    <span class="k">if</span> <span class="n">process_status</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">application</span><span class="p">[</span><span class="s2">&quot;process_status&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">process_status</span>
    <span class="k">if</span> <span class="n">status</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">application</span><span class="p">[</span><span class="s2">&quot;status&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">status</span>

    <span class="n">application_result</span> <span class="o">=</span> <span class="n">applications</span><span class="o">.</span><span class="n">update_app</span><span class="p">(</span><span class="n">APP_ID</span><span class="o">=</span><span class="n">app_id</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">application</span><span class="p">)</span>
    <span class="n">application</span> <span class="o">=</span> <span class="n">application_result</span><span class="o">.</span><span class="n">application</span>
    <span class="n">error</span> <span class="o">=</span> <span class="n">application_result</span><span class="o">.</span><span class="n">error</span>
    <span class="k">if</span> <span class="n">error</span><span class="p">:</span>
        <span class="n">typer</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span>
            <span class="sa">f</span><span class="s1">&#39;Updating application failed with &quot;</span><span class="si">{</span><span class="n">ERRORS</span><span class="p">[</span><span class="n">error</span><span class="p">]</span><span class="si">}</span><span class="s1">&quot;&#39;</span><span class="p">,</span> <span class="n">fg</span><span class="o">=</span><span class="n">typer</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">RED</span>
        <span class="p">)</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Updating application failed with &quot;</span><span class="si">{</span><span class="n">ERRORS</span><span class="p">[</span><span class="n">error</span><span class="p">]</span><span class="si">}</span><span class="s1">&quot;&#39;</span><span class="p">)</span>
        <span class="k">raise</span> <span class="n">typer</span><span class="o">.</span><span class="n">Exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">typer</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Application &#39;</span><span class="si">{</span><span class="n">application</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&#39; was updated successfully.&quot;</span><span class="p">,</span> <span class="n">fg</span><span class="o">=</span><span class="n">typer</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">GREEN</span><span class="p">)</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Application &#39;</span><span class="si">{</span><span class="n">application</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&#39; was updated successfully.&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="cli_render_application">
<a class="viewcode-back" href="../../autonomous_data_collection_agent.html#autonomous_data_collection_agent.cli.cli_render_application">[docs]</a>
<span class="k">def</span> <span class="nf">cli_render_application</span><span class="p">(</span><span class="n">applications</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The `cli_render_application` function renders a formatted application list in the command-line</span>
<span class="sd">    interface.</span>
<span class="sd">    </span>
<span class="sd">    :param applications: The `applications` parameter is a dictionary that contains information about</span>
<span class="sd">    different applications. Each key in the dictionary represents the ID of an application, and the</span>
<span class="sd">    corresponding value is another dictionary that contains various attributes of the application, such</span>
<span class="sd">    as name, short name, host, URL scheme, authentication type, authentication data,</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">applications</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">typer</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span>
            <span class="s2">&quot;There are no application in the list yet&quot;</span><span class="p">,</span> <span class="n">fg</span><span class="o">=</span><span class="n">typer</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">RED</span>
        <span class="p">)</span>
        <span class="k">raise</span> <span class="n">typer</span><span class="o">.</span><span class="n">Exit</span><span class="p">()</span>
    <span class="n">typer</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Application List:</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">fg</span><span class="o">=</span><span class="n">typer</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">BLUE</span><span class="p">,</span> <span class="n">bold</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">columns</span> <span class="o">=</span> <span class="p">(</span>
         <span class="s2">&quot;ID.                      &quot;</span><span class="p">,</span>
        <span class="s2">&quot;| Name                      &quot;</span><span class="p">,</span>
        <span class="s2">&quot;| Short Name &quot;</span><span class="p">,</span>
        <span class="s2">&quot;| Host                 &quot;</span><span class="p">,</span>
        <span class="s2">&quot;| URL Scheme  &quot;</span><span class="p">,</span>
        <span class="s2">&quot;| Auth Type  &quot;</span><span class="p">,</span>
        <span class="s2">&quot;| Auth Data               &quot;</span><span class="p">,</span>
        <span class="s2">&quot;| Dump Path                                                                                  &quot;</span><span class="p">,</span>
        <span class="s2">&quot;| Sync Frequency  &quot;</span><span class="p">,</span>
        <span class="s2">&quot;| Last Sync             &quot;</span><span class="p">,</span>
        <span class="s2">&quot;| Next Sync             &quot;</span><span class="p">,</span>
        <span class="s2">&quot;| Default Payload              &quot;</span><span class="p">,</span>
        <span class="s2">&quot;| Default Filters                          &quot;</span><span class="p">,</span>
        <span class="s2">&quot;| Default Page Size &quot;</span><span class="p">,</span>
        <span class="s2">&quot;| Process Status &quot;</span><span class="p">,</span>
        <span class="s2">&quot;| Status  &quot;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">headers</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">columns</span><span class="p">)</span>
    <span class="n">typer</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span><span class="n">headers</span><span class="p">,</span> <span class="n">fg</span><span class="o">=</span><span class="n">typer</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">BLUE</span><span class="p">,</span> <span class="n">bold</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">typer</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span><span class="s2">&quot;-&quot;</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">headers</span><span class="p">),</span> <span class="n">fg</span><span class="o">=</span><span class="n">typer</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">BLUE</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_column_len</span><span class="p">(</span><span class="n">column_val</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">column_val</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">0</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">column_val</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">column_val</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">column_val</span><span class="p">)</span>
    <span class="c1"># print(applications)</span>
    <span class="c1"># exit(1)   </span>
    <span class="k">for</span> <span class="n">app_id</span> <span class="ow">in</span> <span class="n">applications</span><span class="p">:</span>
        <span class="n">name</span><span class="p">,</span> <span class="n">short_name</span><span class="p">,</span> <span class="n">host</span><span class="p">,</span> <span class="n">url_scheme</span><span class="p">,</span> <span class="n">auth_type</span><span class="p">,</span> <span class="n">auth_data</span><span class="p">,</span> <span class="n">dump_path</span><span class="p">,</span> <span class="n">sync_frequency</span><span class="p">,</span> <span class="n">last_sync</span><span class="p">,</span> <span class="n">next_sync</span><span class="p">,</span> <span class="n">default_payload</span><span class="p">,</span> <span class="n">default_filters</span><span class="p">,</span> <span class="n">default_page_size</span><span class="p">,</span> <span class="n">process_status</span><span class="p">,</span> <span class="n">status</span> <span class="o">=</span> <span class="n">applications</span><span class="p">[</span><span class="n">app_id</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>

        <span class="n">typer</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">app_id</span><span class="si">}{</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">columns</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">_column_len</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">app_id</span><span class="p">)))</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="s1">&#39; &#39;</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="sa">f</span><span class="s2">&quot;| </span><span class="si">{</span><span class="n">name</span><span class="si">}{</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">columns</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">_column_len</span><span class="p">(</span><span class="n">name</span><span class="p">)</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="s1">&#39; &#39;</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="sa">f</span><span class="s2">&quot;| </span><span class="si">{</span><span class="n">short_name</span><span class="si">}{</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">columns</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">_column_len</span><span class="p">(</span><span class="n">short_name</span><span class="p">)</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="s1">&#39; &#39;</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="sa">f</span><span class="s2">&quot;| </span><span class="si">{</span><span class="n">host</span><span class="si">}{</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">columns</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">_column_len</span><span class="p">(</span><span class="n">host</span><span class="p">)</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="s1">&#39; &#39;</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="sa">f</span><span class="s2">&quot;| </span><span class="si">{</span><span class="n">url_scheme</span><span class="si">}{</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">columns</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">_column_len</span><span class="p">(</span><span class="n">url_scheme</span><span class="p">)</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="s1">&#39; &#39;</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="sa">f</span><span class="s2">&quot;| </span><span class="si">{</span><span class="n">auth_type</span><span class="si">}{</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">columns</span><span class="p">[</span><span class="mi">5</span><span class="p">])</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">_column_len</span><span class="p">(</span><span class="n">auth_type</span><span class="p">)</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="s1">&#39; &#39;</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="sa">f</span><span class="s2">&quot;| </span><span class="si">{</span><span class="n">auth_data</span><span class="si">}{</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">columns</span><span class="p">[</span><span class="mi">6</span><span class="p">])</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">_column_len</span><span class="p">(</span><span class="n">auth_data</span><span class="p">)</span><span class="o">-</span><span class="mi">4</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="s1">&#39; &#39;</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="sa">f</span><span class="s2">&quot;| </span><span class="si">{</span><span class="n">dump_path</span><span class="si">}{</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">columns</span><span class="p">[</span><span class="mi">7</span><span class="p">])</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">_column_len</span><span class="p">(</span><span class="n">dump_path</span><span class="p">)</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="s1">&#39; &#39;</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="sa">f</span><span class="s2">&quot;| </span><span class="si">{</span><span class="n">sync_frequency</span><span class="si">}{</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">columns</span><span class="p">[</span><span class="mi">8</span><span class="p">])</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">_column_len</span><span class="p">(</span><span class="n">sync_frequency</span><span class="p">)</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="s1">&#39; &#39;</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="sa">f</span><span class="s2">&quot;| </span><span class="si">{</span><span class="n">last_sync</span><span class="si">}{</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">columns</span><span class="p">[</span><span class="mi">9</span><span class="p">])</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">_column_len</span><span class="p">(</span><span class="n">last_sync</span><span class="p">)</span><span class="o">-</span><span class="mi">6</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="s1">&#39; &#39;</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="sa">f</span><span class="s2">&quot;| </span><span class="si">{</span><span class="n">next_sync</span><span class="si">}{</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">columns</span><span class="p">[</span><span class="mi">10</span><span class="p">])</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">_column_len</span><span class="p">(</span><span class="n">next_sync</span><span class="p">)</span><span class="o">-</span><span class="mi">6</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="s1">&#39; &#39;</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="sa">f</span><span class="s2">&quot;| </span><span class="si">{</span><span class="n">default_payload</span><span class="si">}{</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">columns</span><span class="p">[</span><span class="mi">11</span><span class="p">])</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">_column_len</span><span class="p">(</span><span class="n">default_payload</span><span class="p">)</span><span class="o">-</span><span class="mi">4</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="s1">&#39; &#39;</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="sa">f</span><span class="s2">&quot;| </span><span class="si">{</span><span class="n">default_filters</span><span class="si">}{</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">columns</span><span class="p">[</span><span class="mi">12</span><span class="p">])</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">_column_len</span><span class="p">(</span><span class="n">default_filters</span><span class="p">)</span><span class="o">-</span><span class="mi">4</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="s1">&#39; &#39;</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="sa">f</span><span class="s2">&quot;| </span><span class="si">{</span><span class="n">default_page_size</span><span class="si">}{</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">columns</span><span class="p">[</span><span class="mi">13</span><span class="p">])</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">_column_len</span><span class="p">(</span><span class="n">default_page_size</span><span class="p">)</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="s1">&#39; &#39;</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="sa">f</span><span class="s2">&quot;| </span><span class="si">{</span><span class="n">process_status</span><span class="si">}{</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">columns</span><span class="p">[</span><span class="mi">14</span><span class="p">])</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">_column_len</span><span class="p">(</span><span class="n">process_status</span><span class="p">)</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="s1">&#39; &#39;</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="sa">f</span><span class="s2">&quot;| </span><span class="si">{</span><span class="n">status</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="n">fg</span><span class="o">=</span><span class="n">typer</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">BLUE</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="n">typer</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span><span class="s2">&quot;-&quot;</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">headers</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">fg</span><span class="o">=</span><span class="n">typer</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">BLUE</span><span class="p">)</span></div>


<div class="viewcode-block" id="list_applications">
<a class="viewcode-back" href="../../autonomous_data_collection_agent.html#autonomous_data_collection_agent.cli.list_applications">[docs]</a>
<span class="nd">@app</span><span class="o">.</span><span class="n">command</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;list-apps&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">list_applications</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The function `list_applications` retrieves a list of applications and renders them using a</span>
<span class="sd">    command-line interface.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">applications</span> <span class="o">=</span> <span class="n">get_applications</span><span class="p">()</span>
    <span class="n">application_list</span> <span class="o">=</span> <span class="n">applications</span><span class="o">.</span><span class="n">get_applications</span><span class="p">()</span>
    <span class="n">cli_render_application</span><span class="p">(</span><span class="n">application_list</span><span class="p">)</span></div>


<div class="viewcode-block" id="get_app">
<a class="viewcode-back" href="../../autonomous_data_collection_agent.html#autonomous_data_collection_agent.cli.get_app">[docs]</a>
<span class="nd">@app</span><span class="o">.</span><span class="n">command</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;get-app&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">get_app</span><span class="p">(</span><span class="n">app_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Argument</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;ID of the application&quot;</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The `get_app` function retrieves an application using its ID and displays the application</span>
<span class="sd">    information.</span>
<span class="sd">    </span>
<span class="sd">    :param app_id: The `app_id` parameter is a required argument of type `str`. It represents the ID of</span>
<span class="sd">    the application that you want to retrieve</span>
<span class="sd">    :type app_id: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">applications</span> <span class="o">=</span> <span class="n">get_applications</span><span class="p">()</span>
    <span class="n">application_result</span> <span class="o">=</span> <span class="n">applications</span><span class="o">.</span><span class="n">get_app_by_id</span><span class="p">(</span><span class="n">app_id</span><span class="p">)</span>
    <span class="n">application</span> <span class="o">=</span> <span class="n">application_result</span><span class="o">.</span><span class="n">application</span>
    <span class="n">error</span> <span class="o">=</span> <span class="n">application_result</span><span class="o">.</span><span class="n">error</span>
    <span class="k">if</span> <span class="n">error</span><span class="p">:</span>
        <span class="n">typer</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span>
            <span class="sa">f</span><span class="s1">&#39;Getting application # &quot;</span><span class="si">{</span><span class="n">app_id</span><span class="si">}</span><span class="s1">&quot; failed with &quot;</span><span class="si">{</span><span class="n">ERRORS</span><span class="p">[</span><span class="n">error</span><span class="p">]</span><span class="si">}</span><span class="s1">&quot;&#39;</span><span class="p">,</span>
            <span class="n">fg</span><span class="o">=</span><span class="n">typer</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">RED</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">raise</span> <span class="n">typer</span><span class="o">.</span><span class="n">Exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
       <span class="n">cli_render_application</span><span class="p">({</span><span class="n">app_id</span><span class="p">:</span><span class="n">application</span><span class="p">})</span></div>


<div class="viewcode-block" id="get_app_by_name">
<a class="viewcode-back" href="../../autonomous_data_collection_agent.html#autonomous_data_collection_agent.cli.get_app_by_name">[docs]</a>
<span class="nd">@app</span><span class="o">.</span><span class="n">command</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;get-app-by-name&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">get_app_by_name</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Argument</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Name of the application&quot;</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The function `get_app_by_name` retrieves an application by its name and displays it using a CLI</span>
<span class="sd">    render function.</span>
<span class="sd">    </span>
<span class="sd">    :param name: The `name` parameter is a string that represents the name of the application. It is a</span>
<span class="sd">    required argument and is used to search for the application in the `applications` list</span>
<span class="sd">    :type name: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">applications</span> <span class="o">=</span> <span class="n">get_applications</span><span class="p">()</span>
    <span class="n">application_result</span> <span class="o">=</span> <span class="n">applications</span><span class="o">.</span><span class="n">get_app_by_name</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
    <span class="n">application</span> <span class="o">=</span> <span class="n">application_result</span><span class="o">.</span><span class="n">application</span>
    <span class="n">error</span> <span class="o">=</span> <span class="n">application_result</span><span class="o">.</span><span class="n">error</span>
    <span class="k">if</span> <span class="n">error</span><span class="p">:</span>
        <span class="n">typer</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span>
            <span class="sa">f</span><span class="s1">&#39;Getting application # &quot;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s1">&quot; failed with &quot;</span><span class="si">{</span><span class="n">ERRORS</span><span class="p">[</span><span class="n">error</span><span class="p">]</span><span class="si">}</span><span class="s1">&quot;&#39;</span><span class="p">,</span>
            <span class="n">fg</span><span class="o">=</span><span class="n">typer</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">RED</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">raise</span> <span class="n">typer</span><span class="o">.</span><span class="n">Exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
       <span class="n">cli_render_application</span><span class="p">(</span><span class="n">application</span><span class="p">)</span></div>


<div class="viewcode-block" id="get_app_by_short_name">
<a class="viewcode-back" href="../../autonomous_data_collection_agent.html#autonomous_data_collection_agent.cli.get_app_by_short_name">[docs]</a>
<span class="nd">@app</span><span class="o">.</span><span class="n">command</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;get-app-by-short-name&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">get_app_by_short_name</span><span class="p">(</span><span class="n">short_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Argument</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Short name of the application&quot;</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The function `get_app_by_short_name` retrieves an application using its short name and displays it</span>
<span class="sd">    using a command-line interface.</span>
<span class="sd">    </span>
<span class="sd">    :param short_name: The `short_name` parameter is a required argument of type `str`. It represents</span>
<span class="sd">    the short name of the application that you want to retrieve</span>
<span class="sd">    :type short_name: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">applications</span> <span class="o">=</span> <span class="n">get_applications</span><span class="p">()</span>
    <span class="n">application_result</span> <span class="o">=</span> <span class="n">applications</span><span class="o">.</span><span class="n">get_app_by_short_name</span><span class="p">(</span><span class="n">short_name</span><span class="p">)</span>
    <span class="n">application</span> <span class="o">=</span> <span class="n">application_result</span><span class="o">.</span><span class="n">application</span>
    <span class="n">error</span> <span class="o">=</span> <span class="n">application_result</span><span class="o">.</span><span class="n">error</span>
    <span class="k">if</span> <span class="n">error</span><span class="p">:</span>
        <span class="n">typer</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span>
            <span class="sa">f</span><span class="s1">&#39;Getting application # &quot;</span><span class="si">{</span><span class="n">short_name</span><span class="si">}</span><span class="s1">&quot; failed with &quot;</span><span class="si">{</span><span class="n">ERRORS</span><span class="p">[</span><span class="n">error</span><span class="p">]</span><span class="si">}</span><span class="s1">&quot;&#39;</span><span class="p">,</span>
            <span class="n">fg</span><span class="o">=</span><span class="n">typer</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">RED</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">raise</span> <span class="n">typer</span><span class="o">.</span><span class="n">Exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
       <span class="n">cli_render_application</span><span class="p">(</span><span class="n">application</span><span class="p">)</span></div>


<div class="viewcode-block" id="get_app_by_status">
<a class="viewcode-back" href="../../autonomous_data_collection_agent.html#autonomous_data_collection_agent.cli.get_app_by_status">[docs]</a>
<span class="nd">@app</span><span class="o">.</span><span class="n">command</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;get-app-by-status&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">get_app_by_status</span><span class="p">(</span><span class="n">status</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Argument</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Status of the application to filter&quot;</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The function `get_app_by_status` retrieves applications based on their status and renders them using</span>
<span class="sd">    a command-line interface.</span>
<span class="sd">    </span>
<span class="sd">    :param status: The `status` parameter is an integer that represents the status of the application to</span>
<span class="sd">    filter. It is used to retrieve applications that match the specified status</span>
<span class="sd">    :type status: int</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">applications</span> <span class="o">=</span> <span class="n">get_applications</span><span class="p">()</span>
    <span class="n">application_list</span> <span class="o">=</span> <span class="n">applications</span><span class="o">.</span><span class="n">get_app_by_status</span><span class="p">(</span><span class="n">status</span><span class="p">)</span>
    <span class="n">cli_render_application</span><span class="p">(</span><span class="n">application_list</span><span class="p">)</span></div>


<div class="viewcode-block" id="get_app_by_process_status">
<a class="viewcode-back" href="../../autonomous_data_collection_agent.html#autonomous_data_collection_agent.cli.get_app_by_process_status">[docs]</a>
<span class="nd">@app</span><span class="o">.</span><span class="n">command</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;get-app-by-process-status&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">get_app_by_process_status</span><span class="p">(</span><span class="n">process_status</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Argument</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Process Status of the application to filter&quot;</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The function `get_app_by_process_status` retrieves applications based on their process status and</span>
<span class="sd">    renders them using a command-line interface.</span>
<span class="sd">    </span>
<span class="sd">    :param process_status: The `process_status` parameter is an integer that represents the process</span>
<span class="sd">    status of the application. It is used to filter the applications and retrieve only those with the</span>
<span class="sd">    specified process status</span>
<span class="sd">    :type process_status: int</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">applications</span> <span class="o">=</span> <span class="n">get_applications</span><span class="p">()</span>
    <span class="n">application_list</span> <span class="o">=</span> <span class="n">applications</span><span class="o">.</span><span class="n">get_app_by_process_status</span><span class="p">(</span><span class="n">process_status</span><span class="p">)</span>
    <span class="n">cli_render_application</span><span class="p">(</span><span class="n">application_list</span><span class="p">)</span></div>


<div class="viewcode-block" id="update_app_status">
<a class="viewcode-back" href="../../autonomous_data_collection_agent.html#autonomous_data_collection_agent.cli.update_app_status">[docs]</a>
<span class="nd">@app</span><span class="o">.</span><span class="n">command</span><span class="p">(</span><span class="s2">&quot;update-app-status&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">update_app_status</span><span class="p">(</span>
    <span class="n">app_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Argument</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;ID of the app to update&quot;</span><span class="p">),</span>
    <span class="n">status</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Option</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;--status&quot;</span><span class="p">,</span> <span class="s2">&quot;-s&quot;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;App status (0=&gt;disabled, 1=&gt;enabled)&quot;</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The `update_app_status` function updates the status of an existing application based on the provided</span>
<span class="sd">    app ID and status value.</span>
<span class="sd">    </span>
<span class="sd">    :param app_id: The `app_id` parameter is a required argument that represents the ID of the</span>
<span class="sd">    application to update</span>
<span class="sd">    :type app_id: str</span>
<span class="sd">    :param status: The `status` parameter is an integer that represents the status of the application.</span>
<span class="sd">    It can have two possible values:</span>
<span class="sd">    :type status: int</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Example usage: python your_script.py update_app_status --id &quot;231541323453553701&quot; --name &quot;Updated Name&quot; --app-name &quot;Updated App&quot; --method POST</span>

    <span class="n">applications</span> <span class="o">=</span> <span class="n">get_applications</span><span class="p">()</span>
    <span class="n">application_result</span> <span class="o">=</span> <span class="n">applications</span><span class="o">.</span><span class="n">update_app_status</span><span class="p">(</span><span class="n">app_id</span><span class="p">,</span> <span class="n">status</span><span class="p">)</span>
    <span class="n">error</span> <span class="o">=</span> <span class="n">application_result</span><span class="o">.</span><span class="n">error</span>
    <span class="n">status_txt</span> <span class="o">=</span> <span class="s2">&quot;enabled&quot;</span> <span class="k">if</span> <span class="n">status</span> <span class="o">==</span> <span class="mi">1</span> <span class="k">else</span> <span class="s2">&quot;disabled&quot;</span>

    <span class="k">if</span> <span class="n">error</span><span class="p">:</span>
        <span class="n">typer</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span>
            <span class="sa">f</span><span class="s1">&#39;updating application # </span><span class="si">{</span><span class="n">app_id</span><span class="si">}</span><span class="s1"> failed with status: &quot;</span><span class="si">{</span><span class="n">status_txt</span><span class="si">}</span><span class="s1">&quot;&#39;</span><span class="p">,</span>
            <span class="n">fg</span><span class="o">=</span><span class="n">typer</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">RED</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;updating application # </span><span class="si">{</span><span class="n">app_id</span><span class="si">}</span><span class="s1"> failed with status: &quot;</span><span class="si">{</span><span class="n">status_txt</span><span class="si">}</span><span class="s1">&quot;&#39;</span><span class="p">)</span>
        <span class="k">raise</span> <span class="n">typer</span><span class="o">.</span><span class="n">Exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">typer</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;&quot;&quot;Application # </span><span class="si">{</span><span class="n">app_id</span><span class="si">}</span><span class="s2"> updated successfully with status: &quot;</span><span class="si">{</span><span class="n">status_txt</span><span class="si">}</span><span class="s2">&quot; &quot;&quot;&quot;</span><span class="p">,</span>
            <span class="n">fg</span><span class="o">=</span><span class="n">typer</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">GREEN</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;Application # </span><span class="si">{</span><span class="n">app_id</span><span class="si">}</span><span class="s2"> updated successfully with status: &quot;</span><span class="si">{</span><span class="n">status_txt</span><span class="si">}</span><span class="s2">&quot; &quot;&quot;&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="update_app_process_status">
<a class="viewcode-back" href="../../autonomous_data_collection_agent.html#autonomous_data_collection_agent.cli.update_app_process_status">[docs]</a>
<span class="nd">@app</span><span class="o">.</span><span class="n">command</span><span class="p">(</span><span class="s2">&quot;update-app-process-status&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">update_app_process_status</span><span class="p">(</span>
    <span class="n">app_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Argument</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;ID of the app to update&quot;</span><span class="p">),</span>
    <span class="n">process_status</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Option</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;--process-status&quot;</span><span class="p">,</span> <span class="s2">&quot;-prs&quot;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;App process status (0=&gt;not processed, 1=&gt;inprocess, or 2=&gt;processed)&quot;</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The function `update_app_process_status` updates the process status of an existing application.</span>
<span class="sd">    </span>
<span class="sd">    :param app_id: The `app_id` parameter is a required argument that represents the ID of the app to</span>
<span class="sd">    update. It is used to identify the specific application that needs its process status updated</span>
<span class="sd">    :type app_id: str</span>
<span class="sd">    :param process_status: The `process_status` parameter is an integer that represents the status of</span>
<span class="sd">    the application process. It can have one of the following values:</span>
<span class="sd">    :type process_status: int</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Example usage: python your_script.py update_app_process_status --id &quot;231541323453553701&quot; --name &quot;Updated Name&quot; --app-name &quot;Updated App&quot; --method POST</span>

    <span class="n">applications</span> <span class="o">=</span> <span class="n">get_applications</span><span class="p">()</span>
    <span class="n">application_result</span> <span class="o">=</span> <span class="n">applications</span><span class="o">.</span><span class="n">update_app_process_status</span><span class="p">(</span><span class="n">app_id</span><span class="p">,</span> <span class="n">process_status</span><span class="p">)</span>
    <span class="n">error</span> <span class="o">=</span> <span class="n">application_result</span><span class="o">.</span><span class="n">error</span>

    <span class="k">if</span> <span class="n">error</span><span class="p">:</span>
        <span class="n">typer</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span>
            <span class="sa">f</span><span class="s1">&#39;updating application # </span><span class="si">{</span><span class="n">app_id</span><span class="si">}</span><span class="s1"> failed with status: &quot;</span><span class="si">{</span><span class="n">process_status</span><span class="si">}</span><span class="s1">&quot;&#39;</span><span class="p">,</span>
            <span class="n">fg</span><span class="o">=</span><span class="n">typer</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">RED</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;updating application # </span><span class="si">{</span><span class="n">app_id</span><span class="si">}</span><span class="s1"> failed with status: &quot;</span><span class="si">{</span><span class="n">process_status</span><span class="si">}</span><span class="s1">&quot;&#39;</span><span class="p">)</span>
        <span class="k">raise</span> <span class="n">typer</span><span class="o">.</span><span class="n">Exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">typer</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;&quot;&quot;Application # </span><span class="si">{</span><span class="n">app_id</span><span class="si">}</span><span class="s2"> updated successfully with status: &quot;</span><span class="si">{</span><span class="n">process_status</span><span class="si">}</span><span class="s2">&quot; &quot;&quot;&quot;</span><span class="p">,</span>
            <span class="n">fg</span><span class="o">=</span><span class="n">typer</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">GREEN</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;Application # </span><span class="si">{</span><span class="n">app_id</span><span class="si">}</span><span class="s2"> updated successfully with status: &quot;</span><span class="si">{</span><span class="n">process_status</span><span class="si">}</span><span class="s2">&quot; &quot;&quot;&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="remove_app">
<a class="viewcode-back" href="../../autonomous_data_collection_agent.html#autonomous_data_collection_agent.cli.remove_app">[docs]</a>
<span class="nd">@app</span><span class="o">.</span><span class="n">command</span><span class="p">(</span><span class="s2">&quot;remove-app&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">remove_app</span><span class="p">(</span>
    <span class="n">app_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Argument</span><span class="p">(</span><span class="o">...</span><span class="p">),</span>
    <span class="n">force</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Option</span><span class="p">(</span>
        <span class="kc">False</span><span class="p">,</span>
        <span class="s2">&quot;--force&quot;</span><span class="p">,</span>
        <span class="s2">&quot;-f&quot;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Force deletion without confirmation.&quot;</span><span class="p">,</span>
    <span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The `remove_app` function removes an application using its APP_ID, with an option to force deletion</span>
<span class="sd">    without confirmation.</span>
<span class="sd">    </span>
<span class="sd">    :param app_id: The `app_id` parameter is a required argument that represents the ID of the</span>
<span class="sd">    application to be removed</span>
<span class="sd">    :type app_id: str</span>
<span class="sd">    :param force: The `force` parameter is a boolean option that allows you to force the deletion of the</span>
<span class="sd">    application without any confirmation prompt. If `force` is set to `True`, the application will be</span>
<span class="sd">    removed immediately without any further confirmation. If `force` is set to `False` (the default</span>
<span class="sd">    value),</span>
<span class="sd">    :type force: bool</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">applications</span> <span class="o">=</span> <span class="n">get_applications</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_remove</span><span class="p">():</span>
        <span class="n">application_result</span> <span class="o">=</span> <span class="n">applications</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">app_id</span><span class="p">)</span>
        <span class="n">error</span> <span class="o">=</span> <span class="n">application_result</span><span class="o">.</span><span class="n">error</span>
        <span class="k">if</span> <span class="n">error</span><span class="p">:</span>
            <span class="n">typer</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span>
                <span class="sa">f</span><span class="s1">&#39;Removing application # </span><span class="si">{</span><span class="n">app_id</span><span class="si">}</span><span class="s1"> failed with &quot;</span><span class="si">{</span><span class="n">ERRORS</span><span class="p">[</span><span class="n">error</span><span class="p">]</span><span class="si">}</span><span class="s1">&quot;&#39;</span><span class="p">,</span>
                <span class="n">fg</span><span class="o">=</span><span class="n">typer</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">RED</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span> <span class="sa">f</span><span class="s1">&#39;Removing application # </span><span class="si">{</span><span class="n">app_id</span><span class="si">}</span><span class="s1"> failed with &quot;</span><span class="si">{</span><span class="n">ERRORS</span><span class="p">[</span><span class="n">error</span><span class="p">]</span><span class="si">}</span><span class="s1">&quot;&#39;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">typer</span><span class="o">.</span><span class="n">Exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">typer</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;&quot;&quot;Application # </span><span class="si">{</span><span class="n">app_id</span><span class="si">}</span><span class="s2"> was removed&quot;&quot;&quot;</span><span class="p">,</span>
                <span class="n">fg</span><span class="o">=</span><span class="n">typer</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">GREEN</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;Application # </span><span class="si">{</span><span class="n">app_id</span><span class="si">}</span><span class="s2"> was removed&quot;&quot;&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">force</span><span class="p">:</span>
        <span class="n">_remove</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">application_result</span> <span class="o">=</span> <span class="n">applications</span><span class="o">.</span><span class="n">get_app_by_id</span><span class="p">(</span><span class="n">app_id</span><span class="p">)</span>
            <span class="n">application</span> <span class="o">=</span> <span class="n">application_result</span><span class="o">.</span><span class="n">application</span>
            <span class="n">error</span> <span class="o">=</span> <span class="n">application_result</span><span class="o">.</span><span class="n">error</span>
            <span class="k">if</span> <span class="n">error</span><span class="p">:</span>
                <span class="n">typer</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span><span class="s2">&quot;Invalid APP_ID&quot;</span><span class="p">,</span> <span class="n">fg</span><span class="o">=</span><span class="n">typer</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">RED</span><span class="p">)</span>
                <span class="k">raise</span> <span class="n">typer</span><span class="o">.</span><span class="n">Exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
            <span class="n">typer</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span><span class="s2">&quot;Invalid APP_ID&quot;</span><span class="p">,</span> <span class="n">fg</span><span class="o">=</span><span class="n">typer</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">RED</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">typer</span><span class="o">.</span><span class="n">Exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">delete</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Delete application # </span><span class="si">{</span><span class="n">app_id</span><span class="si">}</span><span class="s2"> with name : </span><span class="si">{</span><span class="n">application</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">?&quot;</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">delete</span><span class="p">:</span>
            <span class="n">_remove</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">typer</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="s2">&quot;Operation canceled&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="remove_all_apps">
<a class="viewcode-back" href="../../autonomous_data_collection_agent.html#autonomous_data_collection_agent.cli.remove_all_apps">[docs]</a>
<span class="nd">@app</span><span class="o">.</span><span class="n">command</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;clear-apps&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">remove_all_apps</span><span class="p">(</span>
    <span class="n">force</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Option</span><span class="p">(</span>
        <span class="o">...</span><span class="p">,</span>
        <span class="n">prompt</span><span class="o">=</span><span class="s2">&quot;Delete all applications?&quot;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Force deletion without confirmation.&quot;</span><span class="p">,</span>
    <span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The function `remove_all_apps` removes all applications, with an option to force deletion</span>
<span class="sd">    without confirmation.</span>
<span class="sd">    </span>
<span class="sd">    :param force: The `force` parameter is a boolean flag that determines whether to delete all</span>
<span class="sd">    applications without confirmation. If `force` is set to `True`, the function will proceed with</span>
<span class="sd">    deleting all applications. If `force` is set to `False`, the function will cancel the operation</span>
<span class="sd">    :type force: bool</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">applications</span> <span class="o">=</span> <span class="n">get_applications</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">force</span><span class="p">:</span>
        <span class="n">error</span> <span class="o">=</span> <span class="n">applications</span><span class="o">.</span><span class="n">remove_all</span><span class="p">()</span><span class="o">.</span><span class="n">error</span>
        <span class="k">if</span> <span class="n">error</span><span class="p">:</span>
            <span class="n">typer</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span>
                <span class="sa">f</span><span class="s1">&#39;Removing applications failed with &quot;</span><span class="si">{</span><span class="n">ERRORS</span><span class="p">[</span><span class="n">error</span><span class="p">]</span><span class="si">}</span><span class="s1">&quot;&#39;</span><span class="p">,</span>
                <span class="n">fg</span><span class="o">=</span><span class="n">typer</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">RED</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Removing applications failed with &quot;</span><span class="si">{</span><span class="n">ERRORS</span><span class="p">[</span><span class="n">error</span><span class="p">]</span><span class="si">}</span><span class="s1">&quot;&#39;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">typer</span><span class="o">.</span><span class="n">Exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">typer</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span><span class="s2">&quot;All applications were removed&quot;</span><span class="p">,</span> <span class="n">fg</span><span class="o">=</span><span class="n">typer</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">GREEN</span><span class="p">)</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;All applications were removed&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">typer</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="s2">&quot;Operation canceled&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="generate_fake">
<a class="viewcode-back" href="../../autonomous_data_collection_agent.html#autonomous_data_collection_agent.cli.generate_fake">[docs]</a>
<span class="nd">@app</span><span class="o">.</span><span class="n">command</span><span class="p">(</span><span class="s2">&quot;generate-fake&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">generate_fake</span><span class="p">(</span>
    <span class="n">app_count</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Option</span><span class="p">(</span>
        <span class="mi">10</span><span class="p">,</span>
        <span class="s2">&quot;--apps&quot;</span><span class="p">,</span>
        <span class="s2">&quot;-a&quot;</span><span class="p">,</span>
        <span class="n">prompt</span><span class="o">=</span><span class="s2">&quot;App Count :&quot;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Number of fake apps you want to generate.&quot;</span><span class="p">,</span>
    <span class="p">),</span>
    <span class="n">endpoints_in_app</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Option</span><span class="p">(</span>
        <span class="mi">10</span><span class="p">,</span>
        <span class="s2">&quot;--endpoints&quot;</span><span class="p">,</span>
        <span class="s2">&quot;-e&quot;</span><span class="p">,</span>
        <span class="n">prompt</span><span class="o">=</span><span class="s2">&quot;Enpoints Count in each App :&quot;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Number of fake endpoints you want to generate in each app.&quot;</span><span class="p">,</span>
    <span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The `generate_fake` function generates random data for a specified number of apps and endpoints in</span>
<span class="sd">    each app, and logs the process.</span>
<span class="sd">    </span>
<span class="sd">    :param app_count: The `app_count` parameter is the number of fake apps you want to generate. It is</span>
<span class="sd">    an integer value and has a default value of 10. You can specify a different value using the `--apps`</span>
<span class="sd">    or `-a` command-line options</span>
<span class="sd">    :type app_count: int</span>
<span class="sd">    :param endpoints_in_app: The `endpoints_in_app` parameter represents the number of fake endpoints</span>
<span class="sd">    you want to generate in each app</span>
<span class="sd">    :type endpoints_in_app: int</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Generating Random data for Apps: </span><span class="si">{</span><span class="n">app_count</span><span class="si">}</span><span class="s2"> and </span><span class="si">{</span><span class="n">endpoints_in_app</span><span class="si">}</span><span class="s2"> endpoints in each app.&quot;</span><span class="p">)</span>
        <span class="n">random_data</span><span class="o">.</span><span class="n">generate_random_data</span><span class="p">(</span><span class="n">app_count</span><span class="p">,</span> <span class="n">endpoints_in_app</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">Encountered error in random data generation: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">err</span><span class="p">)</span><span class="si">}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">typer</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span>
            <span class="sa">f</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">Encountered error in random data generation: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">err</span><span class="p">)</span><span class="si">}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span>
            <span class="n">fg</span><span class="o">=</span><span class="n">typer</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">BRIGHT_RED</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Random Application Data and endpoint data generated successfully!&quot;</span><span class="p">)</span>
        <span class="n">typer</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span>
            <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">Random Application Data and endpoint data generated successfully! </span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span>
            <span class="n">fg</span><span class="o">=</span><span class="n">typer</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">BRIGHT_YELLOW</span><span class="p">,</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="run_fake_server">
<a class="viewcode-back" href="../../autonomous_data_collection_agent.html#autonomous_data_collection_agent.cli.run_fake_server">[docs]</a>
<span class="nd">@app</span><span class="o">.</span><span class="n">command</span><span class="p">(</span><span class="s2">&quot;run-fake-server&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">run_fake_server</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The function `run_fake_server` runs fake web server to work with the Scheduler for testing purposes.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">raw_api</span><span class="o">.</span><span class="n">run_fake_api</span><span class="p">()</span></div>


<div class="viewcode-block" id="test_scheduler">
<a class="viewcode-back" href="../../autonomous_data_collection_agent.html#autonomous_data_collection_agent.cli.test_scheduler">[docs]</a>
<span class="nd">@app</span><span class="o">.</span><span class="n">command</span><span class="p">(</span><span class="s2">&quot;test-scheduler&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_scheduler</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The function `test_scheduler` runs the Scheduler for testing purposes through a user interface</span>
<span class="sd">    instead of a service.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">scheduler_service</span> <span class="o">=</span> <span class="n">SchedulerService</span><span class="p">()</span>
    <span class="n">scheduler_service</span><span class="o">.</span><span class="n">main</span><span class="p">()</span></div>


<span class="k">def</span> <span class="nf">_version_callback</span><span class="p">(</span><span class="n">value</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The function `_version_callback` prints the name and version of an application and then exits.</span>
<span class="sd">    </span>
<span class="sd">    :param value: The `value` parameter is a boolean value that determines whether to execute a specific</span>
<span class="sd">    code block or not</span>
<span class="sd">    :type value: bool</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">value</span><span class="p">:</span>
        <span class="n">typer</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">__app_name__</span><span class="si">}</span><span class="s2"> v</span><span class="si">{</span><span class="n">__version__</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">raise</span> <span class="n">typer</span><span class="o">.</span><span class="n">Exit</span><span class="p">()</span>
    
<div class="viewcode-block" id="main">
<a class="viewcode-back" href="../../autonomous_data_collection_agent.html#autonomous_data_collection_agent.cli.main">[docs]</a>
<span class="nd">@app</span><span class="o">.</span><span class="n">callback</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">main</span><span class="p">(</span>
    <span class="n">version</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Option</span><span class="p">(</span>
        <span class="kc">False</span><span class="p">,</span>
        <span class="s2">&quot;--version&quot;</span><span class="p">,</span>
        <span class="s2">&quot;-v&quot;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Show the application&#39;s version and exit.&quot;</span><span class="p">,</span>
        <span class="n">callback</span><span class="o">=</span><span class="n">_version_callback</span><span class="p">,</span>
        <span class="n">is_eager</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The main function takes a boolean argument &quot;version&quot; and returns its value.</span>
<span class="sd">    </span>
<span class="sd">    :param version: A boolean flag indicating whether to show the application&#39;s version and exit</span>
<span class="sd">    :type version: bool</span>
<span class="sd">    :return: The `version` variable is being returned.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">version</span></div>


</pre></div>

          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../index.html">Autonomous Data Collector Agent</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../autonomous_data_collection_agent.html">autonomous_data_collection_agent package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../autonomous_data_collection_agent.tests.html">autonomous_data_collection_agent.tests package</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  <li><a href="../index.html">Module code</a><ul>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, Sgt Jai Singh.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.2.6</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
    </div>

    

    
  </body>
</html>